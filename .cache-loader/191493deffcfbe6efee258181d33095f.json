{"remainingRequest":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js","dependencies":[{"path":"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js","mtime":1539700108130},{"path":"/Users/jeffrey/HaulTesting/node_modules/cache-loader/dist/cjs.js","mtime":1539652983212},{"path":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js","mtime":1539652983315},{"path":"/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js","mtime":1539615827828}],"contextDependencies":[],"result":["'use strict';var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _jsxFileName=\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js\";(function(){var enterModule=require('react-hot-loader').enterModule;enterModule&&enterModule(module);})();var ListView=require('ListView');var React=require('React');var ScrollView=require('ScrollView');var StyleSheet=require('StyleSheet');var Text=require('Text');var TouchableHighlight=require('TouchableHighlight');var View=require('View');var WebSocketInterceptor=require('WebSocketInterceptor');var XHRInterceptor=require('XHRInterceptor');var LISTVIEW_CELL_HEIGHT=15;var SEPARATOR_THICKNESS=2;var nextXHRId=0;var NetworkOverlay=function(_React$Component){(0,_inherits2.default)(NetworkOverlay,_React$Component);function NetworkOverlay(props){var _this;(0,_classCallCheck2.default)(this,NetworkOverlay);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(NetworkOverlay).call(this,props));_this._requests=[];_this._detailViewItems=[];_this._listViewDataSource=new ListView.DataSource({rowHasChanged:function rowHasChanged(r1,r2){return r1!==r2;}});_this.state={dataSource:_this._listViewDataSource.cloneWithRows([]),newDetailInfo:false,detailRowID:null};_this._listViewHighlighted=false;_this._listViewHeight=0;_this._captureRequestListView=_this._captureRequestListView.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));_this._captureDetailScrollView=_this._captureDetailScrollView.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));_this._listViewOnLayout=_this._listViewOnLayout.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));_this._renderRow=_this._renderRow.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));_this._closeButtonClicked=_this._closeButtonClicked.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));_this._socketIdMap={};_this._xhrIdMap={};return _this;}(0,_createClass2.default)(NetworkOverlay,[{key:\"_enableXHRInterception\",value:function _enableXHRInterception(){var _this2=this;if(XHRInterceptor.isInterceptorEnabled()){return;}XHRInterceptor.setOpenCallback(function(method,url,xhr){xhr._index=nextXHRId++;var xhrIndex=_this2._requests.length;_this2._xhrIdMap[xhr._index]=xhrIndex;var _xhr={type:'XMLHttpRequest',method:method,url:url};_this2._requests.push(_xhr);_this2._detailViewItems.push([]);_this2._genDetailViewItem(xhrIndex);_this2.setState({dataSource:_this2._listViewDataSource.cloneWithRows(_this2._requests)},_this2._scrollToBottom());});XHRInterceptor.setRequestHeaderCallback(function(header,value,xhr){var xhrIndex=_this2._getRequestIndexByXHRID(xhr._index);if(xhrIndex===-1){return;}var networkInfo=_this2._requests[xhrIndex];if(!networkInfo.requestHeaders){networkInfo.requestHeaders={};}networkInfo.requestHeaders[header]=value;_this2._genDetailViewItem(xhrIndex);});XHRInterceptor.setSendCallback(function(data,xhr){var xhrIndex=_this2._getRequestIndexByXHRID(xhr._index);if(xhrIndex===-1){return;}_this2._requests[xhrIndex].dataSent=data;_this2._genDetailViewItem(xhrIndex);});XHRInterceptor.setHeaderReceivedCallback(function(type,size,responseHeaders,xhr){var xhrIndex=_this2._getRequestIndexByXHRID(xhr._index);if(xhrIndex===-1){return;}var networkInfo=_this2._requests[xhrIndex];networkInfo.responseContentType=type;networkInfo.responseSize=size;networkInfo.responseHeaders=responseHeaders;_this2._genDetailViewItem(xhrIndex);});XHRInterceptor.setResponseCallback(function(status,timeout,response,responseURL,responseType,xhr){var xhrIndex=_this2._getRequestIndexByXHRID(xhr._index);if(xhrIndex===-1){return;}var networkInfo=_this2._requests[xhrIndex];networkInfo.status=status;networkInfo.timeout=timeout;networkInfo.response=response;networkInfo.responseURL=responseURL;networkInfo.responseType=responseType;_this2._genDetailViewItem(xhrIndex);});XHRInterceptor.enableInterception();}},{key:\"_enableWebSocketInterception\",value:function _enableWebSocketInterception(){var _this3=this;if(WebSocketInterceptor.isInterceptorEnabled()){return;}WebSocketInterceptor.setConnectCallback(function(url,protocols,options,socketId){var socketIndex=_this3._requests.length;_this3._socketIdMap[socketId]=socketIndex;var _webSocket={type:'WebSocket',url:url,protocols:protocols};_this3._requests.push(_webSocket);_this3._detailViewItems.push([]);_this3._genDetailViewItem(socketIndex);_this3.setState({dataSource:_this3._listViewDataSource.cloneWithRows(_this3._requests)},_this3._scrollToBottom());});WebSocketInterceptor.setCloseCallback(function(statusCode,closeReason,socketId){var socketIndex=_this3._socketIdMap[socketId];if(socketIndex===undefined){return;}if(statusCode!==null&&closeReason!==null){_this3._requests[socketIndex].status=statusCode;_this3._requests[socketIndex].closeReason=closeReason;}_this3._genDetailViewItem(socketIndex);});WebSocketInterceptor.setSendCallback(function(data,socketId){var socketIndex=_this3._socketIdMap[socketId];if(socketIndex===undefined){return;}if(!_this3._requests[socketIndex].messages){_this3._requests[socketIndex].messages='';}_this3._requests[socketIndex].messages+='Sent: '+JSON.stringify(data)+'\\n';_this3._genDetailViewItem(socketIndex);});WebSocketInterceptor.setOnMessageCallback(function(socketId,message){var socketIndex=_this3._socketIdMap[socketId];if(socketIndex===undefined){return;}if(!_this3._requests[socketIndex].messages){_this3._requests[socketIndex].messages='';}_this3._requests[socketIndex].messages+='Received: '+JSON.stringify(message)+'\\n';_this3._genDetailViewItem(socketIndex);});WebSocketInterceptor.setOnCloseCallback(function(socketId,message){var socketIndex=_this3._socketIdMap[socketId];if(socketIndex===undefined){return;}_this3._requests[socketIndex].serverClose=message;_this3._genDetailViewItem(socketIndex);});WebSocketInterceptor.setOnErrorCallback(function(socketId,message){var socketIndex=_this3._socketIdMap[socketId];if(socketIndex===undefined){return;}_this3._requests[socketIndex].serverError=message;_this3._genDetailViewItem(socketIndex);});WebSocketInterceptor.enableInterception();}},{key:\"componentDidMount\",value:function componentDidMount(){this._enableXHRInterception();this._enableWebSocketInterception();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){XHRInterceptor.disableInterception();WebSocketInterceptor.disableInterception();}},{key:\"_renderRow\",value:function _renderRow(rowData,sectionID,rowID,highlightRow){var _this4=this;var urlCellViewStyle=styles.urlEvenCellView;var methodCellViewStyle=styles.methodEvenCellView;if(rowID%2===1){urlCellViewStyle=styles.urlOddCellView;methodCellViewStyle=styles.methodOddCellView;}return React.createElement(TouchableHighlight,{onPress:function onPress(){_this4._pressRow(rowID);highlightRow(sectionID,rowID);},__source:{fileName:_jsxFileName,lineNumber:297}},React.createElement(View,{__source:{fileName:_jsxFileName,lineNumber:302}},React.createElement(View,{style:styles.tableRow,__source:{fileName:_jsxFileName,lineNumber:303}},React.createElement(View,{style:urlCellViewStyle,__source:{fileName:_jsxFileName,lineNumber:304}},React.createElement(Text,{style:styles.cellText,numberOfLines:1,__source:{fileName:_jsxFileName,lineNumber:305}},rowData.url)),React.createElement(View,{style:methodCellViewStyle,__source:{fileName:_jsxFileName,lineNumber:309}},React.createElement(Text,{style:styles.cellText,numberOfLines:1,__source:{fileName:_jsxFileName,lineNumber:310}},this._getTypeShortName(rowData.type))))));}},{key:\"_renderSeperator\",value:function _renderSeperator(sectionID,rowID,adjacentRowHighlighted){return React.createElement(View,{key:sectionID+\"-\"+rowID,style:{height:adjacentRowHighlighted?SEPARATOR_THICKNESS:0,backgroundColor:adjacentRowHighlighted?'#3B5998':'#CCCCCC'},__source:{fileName:_jsxFileName,lineNumber:326}});}},{key:\"_scrollToBottom\",value:function _scrollToBottom(){if(this._listView){var scrollResponder=this._listView.getScrollResponder();if(scrollResponder){var scrollY=Math.max(this._requests.length*LISTVIEW_CELL_HEIGHT+(this._listViewHighlighted?2*SEPARATOR_THICKNESS:0)-this._listViewHeight,0);scrollResponder.scrollResponderScrollTo({x:0,y:scrollY,animated:true});}}}},{key:\"_captureRequestListView\",value:function _captureRequestListView(listRef){this._listView=listRef;}},{key:\"_listViewOnLayout\",value:function _listViewOnLayout(event){var height=event.nativeEvent.layout.height;this._listViewHeight=height;}},{key:\"_pressRow\",value:function _pressRow(rowID){this._listViewHighlighted=true;this.setState({detailRowID:rowID},this._scrollToTop());}},{key:\"_scrollToTop\",value:function _scrollToTop(){if(this._scrollView){this._scrollView.scrollTo({y:0,animated:false});}}},{key:\"_captureDetailScrollView\",value:function _captureDetailScrollView(scrollRef){this._scrollView=scrollRef;}},{key:\"_closeButtonClicked\",value:function _closeButtonClicked(){this.setState({detailRowID:null});}},{key:\"_getStringByValue\",value:function _getStringByValue(value){if(value===undefined){return'undefined';}if(typeof value==='object'){return JSON.stringify(value);}if(typeof value==='string'&&value.length>500){return String(value).substr(0,500).concat('\\n***TRUNCATED TO 500 CHARACTERS***');}return value;}},{key:\"_getRequestIndexByXHRID\",value:function _getRequestIndexByXHRID(index){if(index===undefined){return-1;}var xhrIndex=this._xhrIdMap[index];if(xhrIndex===undefined){return-1;}else{return xhrIndex;}}},{key:\"_getTypeShortName\",value:function _getTypeShortName(type){if(type==='XMLHttpRequest'){return'XHR';}else if(type==='WebSocket'){return'WS';}return'';}},{key:\"_genDetailViewItem\",value:function _genDetailViewItem(index){this._detailViewItems[index]=[];var detailViewItem=this._detailViewItems[index];var requestItem=this._requests[index];for(var _key in requestItem){detailViewItem.push(React.createElement(View,{style:styles.detailViewRow,key:_key,__source:{fileName:_jsxFileName,lineNumber:439}},React.createElement(Text,{style:[styles.detailViewText,styles.detailKeyCellView],__source:{fileName:_jsxFileName,lineNumber:440}},_key),React.createElement(Text,{style:[styles.detailViewText,styles.detailValueCellView],__source:{fileName:_jsxFileName,lineNumber:443}},this._getStringByValue(requestItem[_key]))));}if(this.state.detailRowID!=null&&Number(this.state.detailRowID)===index){this.setState({newDetailInfo:true});}}},{key:\"render\",value:function render(){return React.createElement(View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:460}},this.state.detailRowID!=null&&React.createElement(TouchableHighlight,{style:styles.closeButton,onPress:this._closeButtonClicked,__source:{fileName:_jsxFileName,lineNumber:462}},React.createElement(View,{__source:{fileName:_jsxFileName,lineNumber:465}},React.createElement(Text,{style:styles.clostButtonText,__source:{fileName:_jsxFileName,lineNumber:466}},\"v\"))),this.state.detailRowID!=null&&React.createElement(ScrollView,{style:styles.detailScrollView,ref:this._captureDetailScrollView,__source:{fileName:_jsxFileName,lineNumber:471}},this._detailViewItems[this.state.detailRowID]),React.createElement(View,{style:styles.listViewTitle,__source:{fileName:_jsxFileName,lineNumber:477}},this._requests.length>0&&React.createElement(View,{style:styles.tableRow,__source:{fileName:_jsxFileName,lineNumber:479}},React.createElement(View,{style:styles.urlTitleCellView,__source:{fileName:_jsxFileName,lineNumber:480}},React.createElement(Text,{style:styles.cellText,numberOfLines:1,__source:{fileName:_jsxFileName,lineNumber:481}},\"URL\")),React.createElement(View,{style:styles.methodTitleCellView,__source:{fileName:_jsxFileName,lineNumber:485}},React.createElement(Text,{style:styles.cellText,numberOfLines:1,__source:{fileName:_jsxFileName,lineNumber:486}},\"Type\")))),React.createElement(ListView,{style:styles.listView,ref:this._captureRequestListView,dataSource:this.state.dataSource,renderRow:this._renderRow,enableEmptySections:true,renderSeparator:this._renderSeperator,onLayout:this._listViewOnLayout,__source:{fileName:_jsxFileName,lineNumber:493}}));}},{key:\"__reactstandin__regenerateByEval\",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code);}}]);return NetworkOverlay;}(React.Component);var styles=StyleSheet.create({container:{paddingTop:10,paddingBottom:10,paddingLeft:5,paddingRight:5},listViewTitle:{height:20},listView:{flex:1,height:60},tableRow:{flexDirection:'row',flex:1},cellText:{color:'white',fontSize:12},methodTitleCellView:{height:18,borderColor:'#DCD7CD',borderTopWidth:1,borderBottomWidth:1,borderRightWidth:1,alignItems:'center',justifyContent:'center',backgroundColor:'#444',flex:1},urlTitleCellView:{height:18,borderColor:'#DCD7CD',borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:1,borderRightWidth:1,justifyContent:'center',backgroundColor:'#444',flex:5,paddingLeft:3},methodOddCellView:{height:15,borderColor:'#DCD7CD',borderRightWidth:1,alignItems:'center',justifyContent:'center',backgroundColor:'#000',flex:1},urlOddCellView:{height:15,borderColor:'#DCD7CD',borderLeftWidth:1,borderRightWidth:1,justifyContent:'center',backgroundColor:'#000',flex:5,paddingLeft:3},methodEvenCellView:{height:15,borderColor:'#DCD7CD',borderRightWidth:1,alignItems:'center',justifyContent:'center',backgroundColor:'#888',flex:1},urlEvenCellView:{height:15,borderColor:'#DCD7CD',borderLeftWidth:1,borderRightWidth:1,justifyContent:'center',backgroundColor:'#888',flex:5,paddingLeft:3},detailScrollView:{flex:1,height:180,marginTop:5,marginBottom:5},detailKeyCellView:{flex:1.3},detailValueCellView:{flex:2},detailViewRow:{flexDirection:'row',paddingHorizontal:3},detailViewText:{color:'white',fontSize:11},clostButtonText:{color:'white',fontSize:10},closeButton:{marginTop:5,backgroundColor:'#888',justifyContent:'center',alignItems:'center'}});module.exports=NetworkOverlay;;(function(){var reactHotLoader=require('react-hot-loader').default;var leaveModule=require('react-hot-loader').leaveModule;if(!reactHotLoader){return;}reactHotLoader.register(LISTVIEW_CELL_HEIGHT,\"LISTVIEW_CELL_HEIGHT\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js\");reactHotLoader.register(SEPARATOR_THICKNESS,\"SEPARATOR_THICKNESS\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js\");reactHotLoader.register(nextXHRId,\"nextXHRId\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js\");reactHotLoader.register(NetworkOverlay,\"NetworkOverlay\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js\");reactHotLoader.register(styles,\"styles\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js\");leaveModule(module);})();;",{"version":3,"sources":["/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Inspector/NetworkOverlay.js"],"names":["ListView","require","React","ScrollView","StyleSheet","Text","TouchableHighlight","View","WebSocketInterceptor","XHRInterceptor","LISTVIEW_CELL_HEIGHT","SEPARATOR_THICKNESS","nextXHRId","NetworkOverlay","props","_requests","_detailViewItems","_listViewDataSource","DataSource","rowHasChanged","r1","r2","state","dataSource","cloneWithRows","newDetailInfo","detailRowID","_listViewHighlighted","_listViewHeight","_captureRequestListView","bind","_captureDetailScrollView","_listViewOnLayout","_renderRow","_closeButtonClicked","_socketIdMap","_xhrIdMap","isInterceptorEnabled","setOpenCallback","method","url","xhr","_index","xhrIndex","length","_xhr","type","push","_genDetailViewItem","setState","_scrollToBottom","setRequestHeaderCallback","header","value","_getRequestIndexByXHRID","networkInfo","requestHeaders","setSendCallback","data","dataSent","setHeaderReceivedCallback","size","responseHeaders","responseContentType","responseSize","setResponseCallback","status","timeout","response","responseURL","responseType","enableInterception","setConnectCallback","protocols","options","socketId","socketIndex","_webSocket","setCloseCallback","statusCode","closeReason","undefined","messages","JSON","stringify","setOnMessageCallback","message","setOnCloseCallback","serverClose","setOnErrorCallback","serverError","_enableXHRInterception","_enableWebSocketInterception","disableInterception","rowData","sectionID","rowID","highlightRow","urlCellViewStyle","styles","urlEvenCellView","methodCellViewStyle","methodEvenCellView","urlOddCellView","methodOddCellView","_pressRow","tableRow","cellText","_getTypeShortName","adjacentRowHighlighted","height","backgroundColor","_listView","scrollResponder","getScrollResponder","scrollY","Math","max","scrollResponderScrollTo","x","y","animated","listRef","event","nativeEvent","layout","_scrollToTop","_scrollView","scrollTo","scrollRef","String","substr","concat","index","detailViewItem","requestItem","key","detailViewRow","detailViewText","detailKeyCellView","detailValueCellView","_getStringByValue","Number","container","closeButton","clostButtonText","detailScrollView","listViewTitle","urlTitleCellView","methodTitleCellView","listView","_renderSeperator","Component","create","paddingTop","paddingBottom","paddingLeft","paddingRight","flex","flexDirection","color","fontSize","borderColor","borderTopWidth","borderBottomWidth","borderRightWidth","alignItems","justifyContent","borderLeftWidth","marginTop","marginBottom","paddingHorizontal","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nconst ListView = require('ListView');\nconst React = require('React');\nconst ScrollView = require('ScrollView');\nconst StyleSheet = require('StyleSheet');\nconst Text = require('Text');\nconst TouchableHighlight = require('TouchableHighlight');\nconst View = require('View');\nconst WebSocketInterceptor = require('WebSocketInterceptor');\nconst XHRInterceptor = require('XHRInterceptor');\n\nconst LISTVIEW_CELL_HEIGHT = 15;\nconst SEPARATOR_THICKNESS = 2;\n\n// Global id for the intercepted XMLHttpRequest objects.\nlet nextXHRId = 0;\n\ntype NetworkRequestInfo = {\n  type?: string,\n  url?: string,\n  method?: string,\n  status?: number,\n  dataSent?: any,\n  responseContentType?: string,\n  responseSize?: number,\n  requestHeaders?: Object,\n  responseHeaders?: string,\n  response?: Object | string,\n  responseURL?: string,\n  responseType?: string,\n  timeout?: number,\n  closeReason?: string,\n  messages?: string,\n  serverClose?: Object,\n  serverError?: Object,\n};\n\n/**\n * Show all the intercepted network requests over the InspectorPanel.\n */\nclass NetworkOverlay extends React.Component<\n  Object,\n  {\n    dataSource: ListView.DataSource,\n    newDetailInfo: boolean,\n    detailRowID: ?number,\n  },\n> {\n  _requests: Array<NetworkRequestInfo>;\n  _listViewDataSource: ListView.DataSource;\n  _listView: ?ListView;\n  _listViewHighlighted: boolean;\n  _listViewHeight: number;\n  _scrollView: ?ScrollView;\n  _detailViewItems: Array<Array<React.Element<any>>>;\n  _listViewOnLayout: (event: Event) => void;\n  _captureRequestListView: (listRef: ?ListView) => void;\n  _captureDetailScrollView: (scrollRef: ?ScrollView) => void;\n  _renderRow: (\n    rowData: NetworkRequestInfo,\n    sectionID: number,\n    rowID: number,\n    highlightRow: (sectionID: number, rowID: number) => void,\n  ) => React.Element<any>;\n  _closeButtonClicked: () => void;\n  // Map of `socketId` -> `index in `_requests``.\n  _socketIdMap: Object;\n  // Map of `xhr._index` -> `index in `_requests``.\n  _xhrIdMap: {[key: number]: number};\n\n  constructor(props: Object) {\n    super(props);\n    this._requests = [];\n    this._detailViewItems = [];\n    this._listViewDataSource = new ListView.DataSource({\n      rowHasChanged: (r1, r2) => r1 !== r2,\n    });\n    this.state = {\n      dataSource: this._listViewDataSource.cloneWithRows([]),\n      newDetailInfo: false,\n      detailRowID: null,\n    };\n    this._listViewHighlighted = false;\n    this._listViewHeight = 0;\n    this._captureRequestListView = this._captureRequestListView.bind(this);\n    this._captureDetailScrollView = this._captureDetailScrollView.bind(this);\n    this._listViewOnLayout = this._listViewOnLayout.bind(this);\n    this._renderRow = this._renderRow.bind(this);\n    this._closeButtonClicked = this._closeButtonClicked.bind(this);\n    this._socketIdMap = {};\n    this._xhrIdMap = {};\n  }\n\n  _enableXHRInterception(): void {\n    if (XHRInterceptor.isInterceptorEnabled()) {\n      return;\n    }\n    // Show the XHR request item in listView as soon as it was opened.\n    XHRInterceptor.setOpenCallback((method, url, xhr) => {\n      // Generate a global id for each intercepted xhr object, add this id\n      // to the xhr object as a private `_index` property to identify it,\n      // so that we can distinguish different xhr objects in callbacks.\n      xhr._index = nextXHRId++;\n      const xhrIndex = this._requests.length;\n      this._xhrIdMap[xhr._index] = xhrIndex;\n\n      const _xhr: NetworkRequestInfo = {\n        type: 'XMLHttpRequest',\n        method: method,\n        url: url,\n      };\n      this._requests.push(_xhr);\n      this._detailViewItems.push([]);\n      this._genDetailViewItem(xhrIndex);\n      this.setState(\n        {dataSource: this._listViewDataSource.cloneWithRows(this._requests)},\n        this._scrollToBottom(),\n      );\n    });\n\n    XHRInterceptor.setRequestHeaderCallback((header, value, xhr) => {\n      const xhrIndex = this._getRequestIndexByXHRID(xhr._index);\n      if (xhrIndex === -1) {\n        return;\n      }\n      const networkInfo = this._requests[xhrIndex];\n      if (!networkInfo.requestHeaders) {\n        networkInfo.requestHeaders = {};\n      }\n      networkInfo.requestHeaders[header] = value;\n      this._genDetailViewItem(xhrIndex);\n    });\n\n    XHRInterceptor.setSendCallback((data, xhr) => {\n      const xhrIndex = this._getRequestIndexByXHRID(xhr._index);\n      if (xhrIndex === -1) {\n        return;\n      }\n      this._requests[xhrIndex].dataSent = data;\n      this._genDetailViewItem(xhrIndex);\n    });\n\n    XHRInterceptor.setHeaderReceivedCallback(\n      (type, size, responseHeaders, xhr) => {\n        const xhrIndex = this._getRequestIndexByXHRID(xhr._index);\n        if (xhrIndex === -1) {\n          return;\n        }\n        const networkInfo = this._requests[xhrIndex];\n        networkInfo.responseContentType = type;\n        networkInfo.responseSize = size;\n        networkInfo.responseHeaders = responseHeaders;\n        this._genDetailViewItem(xhrIndex);\n      },\n    );\n\n    XHRInterceptor.setResponseCallback(\n      (status, timeout, response, responseURL, responseType, xhr) => {\n        const xhrIndex = this._getRequestIndexByXHRID(xhr._index);\n        if (xhrIndex === -1) {\n          return;\n        }\n        const networkInfo = this._requests[xhrIndex];\n        networkInfo.status = status;\n        networkInfo.timeout = timeout;\n        networkInfo.response = response;\n        networkInfo.responseURL = responseURL;\n        networkInfo.responseType = responseType;\n        this._genDetailViewItem(xhrIndex);\n      },\n    );\n\n    // Fire above callbacks.\n    XHRInterceptor.enableInterception();\n  }\n\n  _enableWebSocketInterception(): void {\n    if (WebSocketInterceptor.isInterceptorEnabled()) {\n      return;\n    }\n    // Show the WebSocket request item in listView when 'connect' is called.\n    WebSocketInterceptor.setConnectCallback(\n      (url, protocols, options, socketId) => {\n        const socketIndex = this._requests.length;\n        this._socketIdMap[socketId] = socketIndex;\n        const _webSocket: NetworkRequestInfo = {\n          type: 'WebSocket',\n          url: url,\n          protocols: protocols,\n        };\n        this._requests.push(_webSocket);\n        this._detailViewItems.push([]);\n        this._genDetailViewItem(socketIndex);\n        this.setState(\n          {dataSource: this._listViewDataSource.cloneWithRows(this._requests)},\n          this._scrollToBottom(),\n        );\n      },\n    );\n\n    WebSocketInterceptor.setCloseCallback(\n      (statusCode, closeReason, socketId) => {\n        const socketIndex = this._socketIdMap[socketId];\n        if (socketIndex === undefined) {\n          return;\n        }\n        if (statusCode !== null && closeReason !== null) {\n          this._requests[socketIndex].status = statusCode;\n          this._requests[socketIndex].closeReason = closeReason;\n        }\n        this._genDetailViewItem(socketIndex);\n      },\n    );\n\n    WebSocketInterceptor.setSendCallback((data, socketId) => {\n      const socketIndex = this._socketIdMap[socketId];\n      if (socketIndex === undefined) {\n        return;\n      }\n      if (!this._requests[socketIndex].messages) {\n        this._requests[socketIndex].messages = '';\n      }\n      this._requests[socketIndex].messages +=\n        'Sent: ' + JSON.stringify(data) + '\\n';\n      this._genDetailViewItem(socketIndex);\n    });\n\n    WebSocketInterceptor.setOnMessageCallback((socketId, message) => {\n      const socketIndex = this._socketIdMap[socketId];\n      if (socketIndex === undefined) {\n        return;\n      }\n      if (!this._requests[socketIndex].messages) {\n        this._requests[socketIndex].messages = '';\n      }\n      this._requests[socketIndex].messages +=\n        'Received: ' + JSON.stringify(message) + '\\n';\n      this._genDetailViewItem(socketIndex);\n    });\n\n    WebSocketInterceptor.setOnCloseCallback((socketId, message) => {\n      const socketIndex = this._socketIdMap[socketId];\n      if (socketIndex === undefined) {\n        return;\n      }\n      this._requests[socketIndex].serverClose = message;\n      this._genDetailViewItem(socketIndex);\n    });\n\n    WebSocketInterceptor.setOnErrorCallback((socketId, message) => {\n      const socketIndex = this._socketIdMap[socketId];\n      if (socketIndex === undefined) {\n        return;\n      }\n      this._requests[socketIndex].serverError = message;\n      this._genDetailViewItem(socketIndex);\n    });\n\n    // Fire above callbacks.\n    WebSocketInterceptor.enableInterception();\n  }\n\n  componentDidMount() {\n    this._enableXHRInterception();\n    this._enableWebSocketInterception();\n  }\n\n  componentWillUnmount() {\n    XHRInterceptor.disableInterception();\n    WebSocketInterceptor.disableInterception();\n  }\n\n  _renderRow(\n    rowData: NetworkRequestInfo,\n    sectionID: number,\n    rowID: number,\n    highlightRow: (sectionID: number, rowID: number) => void,\n  ): React.Element<any> {\n    let urlCellViewStyle = styles.urlEvenCellView;\n    let methodCellViewStyle = styles.methodEvenCellView;\n    if (rowID % 2 === 1) {\n      urlCellViewStyle = styles.urlOddCellView;\n      methodCellViewStyle = styles.methodOddCellView;\n    }\n    return (\n      <TouchableHighlight\n        onPress={() => {\n          this._pressRow(rowID);\n          highlightRow(sectionID, rowID);\n        }}>\n        <View>\n          <View style={styles.tableRow}>\n            <View style={urlCellViewStyle}>\n              <Text style={styles.cellText} numberOfLines={1}>\n                {rowData.url}\n              </Text>\n            </View>\n            <View style={methodCellViewStyle}>\n              <Text style={styles.cellText} numberOfLines={1}>\n                {this._getTypeShortName(rowData.type)}\n              </Text>\n            </View>\n          </View>\n        </View>\n      </TouchableHighlight>\n    );\n  }\n\n  _renderSeperator(\n    sectionID: number,\n    rowID: number,\n    adjacentRowHighlighted: boolean,\n  ): React.Element<any> {\n    return (\n      <View\n        key={`${sectionID}-${rowID}`}\n        style={{\n          height: adjacentRowHighlighted ? SEPARATOR_THICKNESS : 0,\n          backgroundColor: adjacentRowHighlighted ? '#3B5998' : '#CCCCCC',\n        }}\n      />\n    );\n  }\n\n  _scrollToBottom(): void {\n    if (this._listView) {\n      const scrollResponder = this._listView.getScrollResponder();\n      if (scrollResponder) {\n        const scrollY = Math.max(\n          this._requests.length * LISTVIEW_CELL_HEIGHT +\n            (this._listViewHighlighted ? 2 * SEPARATOR_THICKNESS : 0) -\n            this._listViewHeight,\n          0,\n        );\n        scrollResponder.scrollResponderScrollTo({\n          x: 0,\n          y: scrollY,\n          animated: true,\n        });\n      }\n    }\n  }\n\n  _captureRequestListView(listRef: ?ListView): void {\n    this._listView = listRef;\n  }\n\n  _listViewOnLayout(event: any): void {\n    const {height} = event.nativeEvent.layout;\n    this._listViewHeight = height;\n  }\n\n  /**\n   * Popup a scrollView to dynamically show detailed information of\n   * the request, when pressing a row in the network flow listView.\n   */\n  _pressRow(rowID: number): void {\n    this._listViewHighlighted = true;\n    this.setState({detailRowID: rowID}, this._scrollToTop());\n  }\n\n  _scrollToTop(): void {\n    if (this._scrollView) {\n      this._scrollView.scrollTo({\n        y: 0,\n        animated: false,\n      });\n    }\n  }\n\n  _captureDetailScrollView(scrollRef: ?ScrollView): void {\n    this._scrollView = scrollRef;\n  }\n\n  _closeButtonClicked() {\n    this.setState({detailRowID: null});\n  }\n\n  _getStringByValue(value: any): string {\n    if (value === undefined) {\n      return 'undefined';\n    }\n    if (typeof value === 'object') {\n      return JSON.stringify(value);\n    }\n    if (typeof value === 'string' && value.length > 500) {\n      return String(value)\n        .substr(0, 500)\n        .concat('\\n***TRUNCATED TO 500 CHARACTERS***');\n    }\n    return value;\n  }\n\n  _getRequestIndexByXHRID(index: number): number {\n    if (index === undefined) {\n      return -1;\n    }\n    const xhrIndex = this._xhrIdMap[index];\n    if (xhrIndex === undefined) {\n      return -1;\n    } else {\n      return xhrIndex;\n    }\n  }\n\n  _getTypeShortName(type: any): string {\n    if (type === 'XMLHttpRequest') {\n      return 'XHR';\n    } else if (type === 'WebSocket') {\n      return 'WS';\n    }\n\n    return '';\n  }\n\n  /**\n   * Generate a list of views containing network request information for\n   * a XHR object, to be shown in the detail scrollview. This function\n   * should be called every time there is a new update of the XHR object,\n   * in order to show network request/response information in real time.\n   */\n  _genDetailViewItem(index: number): void {\n    this._detailViewItems[index] = [];\n    const detailViewItem = this._detailViewItems[index];\n    const requestItem = this._requests[index];\n    for (let key in requestItem) {\n      detailViewItem.push(\n        <View style={styles.detailViewRow} key={key}>\n          <Text style={[styles.detailViewText, styles.detailKeyCellView]}>\n            {key}\n          </Text>\n          <Text style={[styles.detailViewText, styles.detailValueCellView]}>\n            {this._getStringByValue(requestItem[key])}\n          </Text>\n        </View>,\n      );\n    }\n    // Re-render if this network request is showing in the detail view.\n    if (\n      this.state.detailRowID != null &&\n      Number(this.state.detailRowID) === index\n    ) {\n      this.setState({newDetailInfo: true});\n    }\n  }\n\n  render() {\n    return (\n      <View style={styles.container}>\n        {this.state.detailRowID != null && (\n          <TouchableHighlight\n            style={styles.closeButton}\n            onPress={this._closeButtonClicked}>\n            <View>\n              <Text style={styles.clostButtonText}>v</Text>\n            </View>\n          </TouchableHighlight>\n        )}\n        {this.state.detailRowID != null && (\n          <ScrollView\n            style={styles.detailScrollView}\n            ref={this._captureDetailScrollView}>\n            {this._detailViewItems[this.state.detailRowID]}\n          </ScrollView>\n        )}\n        <View style={styles.listViewTitle}>\n          {this._requests.length > 0 && (\n            <View style={styles.tableRow}>\n              <View style={styles.urlTitleCellView}>\n                <Text style={styles.cellText} numberOfLines={1}>\n                  URL\n                </Text>\n              </View>\n              <View style={styles.methodTitleCellView}>\n                <Text style={styles.cellText} numberOfLines={1}>\n                  Type\n                </Text>\n              </View>\n            </View>\n          )}\n        </View>\n        <ListView\n          style={styles.listView}\n          ref={this._captureRequestListView}\n          dataSource={this.state.dataSource}\n          renderRow={this._renderRow}\n          enableEmptySections={true}\n          renderSeparator={this._renderSeperator}\n          // $FlowFixMe Found when typing ListView\n          onLayout={this._listViewOnLayout}\n        />\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: 10,\n    paddingBottom: 10,\n    paddingLeft: 5,\n    paddingRight: 5,\n  },\n  listViewTitle: {\n    height: 20,\n  },\n  listView: {\n    flex: 1,\n    height: 60,\n  },\n  tableRow: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  cellText: {\n    color: 'white',\n    fontSize: 12,\n  },\n  methodTitleCellView: {\n    height: 18,\n    borderColor: '#DCD7CD',\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderRightWidth: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#444',\n    flex: 1,\n  },\n  urlTitleCellView: {\n    height: 18,\n    borderColor: '#DCD7CD',\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderLeftWidth: 1,\n    borderRightWidth: 1,\n    justifyContent: 'center',\n    backgroundColor: '#444',\n    flex: 5,\n    paddingLeft: 3,\n  },\n  methodOddCellView: {\n    height: 15,\n    borderColor: '#DCD7CD',\n    borderRightWidth: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#000',\n    flex: 1,\n  },\n  urlOddCellView: {\n    height: 15,\n    borderColor: '#DCD7CD',\n    borderLeftWidth: 1,\n    borderRightWidth: 1,\n    justifyContent: 'center',\n    backgroundColor: '#000',\n    flex: 5,\n    paddingLeft: 3,\n  },\n  methodEvenCellView: {\n    height: 15,\n    borderColor: '#DCD7CD',\n    borderRightWidth: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#888',\n    flex: 1,\n  },\n  urlEvenCellView: {\n    height: 15,\n    borderColor: '#DCD7CD',\n    borderLeftWidth: 1,\n    borderRightWidth: 1,\n    justifyContent: 'center',\n    backgroundColor: '#888',\n    flex: 5,\n    paddingLeft: 3,\n  },\n  detailScrollView: {\n    flex: 1,\n    height: 180,\n    marginTop: 5,\n    marginBottom: 5,\n  },\n  detailKeyCellView: {\n    flex: 1.3,\n  },\n  detailValueCellView: {\n    flex: 2,\n  },\n  detailViewRow: {\n    flexDirection: 'row',\n    paddingHorizontal: 3,\n  },\n  detailViewText: {\n    color: 'white',\n    fontSize: 11,\n  },\n  clostButtonText: {\n    color: 'white',\n    fontSize: 10,\n  },\n  closeButton: {\n    marginTop: 5,\n    backgroundColor: '#888',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n\nmodule.exports = NetworkOverlay;\n"]}]}