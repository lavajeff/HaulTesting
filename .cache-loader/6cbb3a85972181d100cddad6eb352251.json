{"remainingRequest":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js","dependencies":[{"path":"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js","mtime":1539700108130},{"path":"/Users/jeffrey/HaulTesting/node_modules/cache-loader/dist/cjs.js","mtime":1539652983212},{"path":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js","mtime":1539652983315},{"path":"/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js","mtime":1539615827828}],"contextDependencies":[],"result":["'use strict';(function(){var enterModule=require('react-hot-loader').enterModule;enterModule&&enterModule(module);})();var Platform=require('Platform');var Systrace=require('Systrace');var invariant=require('fbjs/lib/invariant');var _require=require('NativeModules'),Timing=_require.Timing;var BatchedBridge=require('BatchedBridge');var _performanceNow=null;function performanceNow(){if(!_performanceNow){_performanceNow=require('fbjs/lib/performanceNow');}return _performanceNow();}var FRAME_DURATION=1000/60;var IDLE_CALLBACK_FRAME_DEADLINE=1;var MAX_TIMER_DURATION_MS=60*1000;var IS_ANDROID=Platform.OS==='android';var ANDROID_LONG_TIMER_MESSAGE='Setting a timer for a long period of time, i.e. multiple minutes, is a '+'performance and correctness issue on Android as it keeps the timer '+'module awake, and timers can only be called when the app is in the foreground. '+'See https://github.com/facebook/react-native/issues/12981 for more info.';var callbacks=[];var types=[];var timerIDs=[];var immediates=[];var requestIdleCallbacks=[];var requestIdleCallbackTimeouts={};var identifiers=[];var GUID=1;var errors=null;var hasEmittedTimeDriftWarning=false;function _getFreeIndex(){var freeIndex=timerIDs.indexOf(null);if(freeIndex===-1){freeIndex=timerIDs.length;}return freeIndex;}function _allocateCallback(func,type){var id=GUID++;var freeIndex=_getFreeIndex();timerIDs[freeIndex]=id;callbacks[freeIndex]=func;types[freeIndex]=type;if(__DEV__){var parseErrorStack=require('parseErrorStack');var error=new Error();error.framesToPop=1;var stack=parseErrorStack(error);if(stack){identifiers[freeIndex]=stack.shift();}}return id;}function _callTimer(timerID,frameTime,didTimeout){require('fbjs/lib/warning')(timerID<=GUID,'Tried to call timer with ID %s but no such timer exists.',timerID);var timerIndex=timerIDs.indexOf(timerID);if(timerIndex===-1){return;}var type=types[timerIndex];var callback=callbacks[timerIndex];if(!callback||!type){console.error('No callback found for timerID '+timerID);return;}if(__DEV__){var identifier=identifiers[timerIndex]||{};Systrace.beginEvent('Systrace.callTimer: '+identifier.methodName);}if(type==='setTimeout'||type==='setImmediate'||type==='requestAnimationFrame'||type==='requestIdleCallback'){_clearIndex(timerIndex);}try{if(type==='setTimeout'||type==='setInterval'||type==='setImmediate'){callback();}else if(type==='requestAnimationFrame'){callback(performanceNow());}else if(type==='requestIdleCallback'){callback({timeRemaining:function timeRemaining(){return Math.max(0,FRAME_DURATION-(performanceNow()-frameTime));},didTimeout:!!didTimeout});}else{console.error('Tried to call a callback with invalid type: '+type);}}catch(e){if(!errors){errors=[e];}else{errors.push(e);}}if(__DEV__){Systrace.endEvent();}}function _callImmediatesPass(){if(__DEV__){Systrace.beginEvent('callImmediatesPass()');}if(immediates.length>0){var passImmediates=immediates.slice();immediates=[];for(var i=0;i<passImmediates.length;++i){_callTimer(passImmediates[i],0);}}if(__DEV__){Systrace.endEvent();}return immediates.length>0;}function _clearIndex(i){timerIDs[i]=null;callbacks[i]=null;types[i]=null;identifiers[i]=null;}function _freeCallback(timerID){if(timerID==null){return;}var index=timerIDs.indexOf(timerID);if(index!==-1){_clearIndex(index);var type=types[index];if(type!=='setImmediate'&&type!=='requestIdleCallback'){Timing.deleteTimer(timerID);}}}var JSTimers={setTimeout:function setTimeout(func,duration){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key];}if(__DEV__&&IS_ANDROID&&duration>MAX_TIMER_DURATION_MS){console.warn(ANDROID_LONG_TIMER_MESSAGE+'\\n'+'(Saw setTimeout with duration '+duration+'ms)');}var id=_allocateCallback(function(){return func.apply(undefined,args);},'setTimeout');Timing.createTimer(id,duration||0,Date.now(),false);return id;},setInterval:function setInterval(func,duration){for(var _len2=arguments.length,args=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2];}if(__DEV__&&IS_ANDROID&&duration>MAX_TIMER_DURATION_MS){console.warn(ANDROID_LONG_TIMER_MESSAGE+'\\n'+'(Saw setInterval with duration '+duration+'ms)');}var id=_allocateCallback(function(){return func.apply(undefined,args);},'setInterval');Timing.createTimer(id,duration||0,Date.now(),true);return id;},setImmediate:function setImmediate(func){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3];}var id=_allocateCallback(function(){return func.apply(undefined,args);},'setImmediate');immediates.push(id);return id;},requestAnimationFrame:function requestAnimationFrame(func){var id=_allocateCallback(func,'requestAnimationFrame');Timing.createTimer(id,1,Date.now(),false);return id;},requestIdleCallback:function requestIdleCallback(func,options){if(requestIdleCallbacks.length===0){Timing.setSendIdleEvents(true);}var timeout=options&&options.timeout;var id=_allocateCallback(timeout!=null?function(deadline){var timeoutId=requestIdleCallbackTimeouts[id];if(timeoutId){JSTimers.clearTimeout(timeoutId);delete requestIdleCallbackTimeouts[id];}return func(deadline);}:func,'requestIdleCallback');requestIdleCallbacks.push(id);if(timeout!=null){var timeoutId=JSTimers.setTimeout(function(){var index=requestIdleCallbacks.indexOf(id);if(index>-1){requestIdleCallbacks.splice(index,1);_callTimer(id,performanceNow(),true);}delete requestIdleCallbackTimeouts[id];if(requestIdleCallbacks.length===0){Timing.setSendIdleEvents(false);}},timeout);requestIdleCallbackTimeouts[id]=timeoutId;}return id;},cancelIdleCallback:function cancelIdleCallback(timerID){_freeCallback(timerID);var index=requestIdleCallbacks.indexOf(timerID);if(index!==-1){requestIdleCallbacks.splice(index,1);}var timeoutId=requestIdleCallbackTimeouts[timerID];if(timeoutId){JSTimers.clearTimeout(timeoutId);delete requestIdleCallbackTimeouts[timerID];}if(requestIdleCallbacks.length===0){Timing.setSendIdleEvents(false);}},clearTimeout:function clearTimeout(timerID){_freeCallback(timerID);},clearInterval:function clearInterval(timerID){_freeCallback(timerID);},clearImmediate:function clearImmediate(timerID){_freeCallback(timerID);var index=immediates.indexOf(timerID);if(index!==-1){immediates.splice(index,1);}},cancelAnimationFrame:function cancelAnimationFrame(timerID){_freeCallback(timerID);},callTimers:function callTimers(timersToCall){invariant(timersToCall.length!==0,'Cannot call `callTimers` with an empty list of IDs.');errors=null;for(var i=0;i<timersToCall.length;i++){_callTimer(timersToCall[i],0);}if(errors){var errorCount=errors.length;if(errorCount>1){for(var ii=1;ii<errorCount;ii++){JSTimers.setTimeout(function(error){throw error;}.bind(null,errors[ii]),0);}}throw errors[0];}},callIdleCallbacks:function callIdleCallbacks(frameTime){if(FRAME_DURATION-(performanceNow()-frameTime)<IDLE_CALLBACK_FRAME_DEADLINE){return;}errors=null;if(requestIdleCallbacks.length>0){var passIdleCallbacks=requestIdleCallbacks.slice();requestIdleCallbacks=[];for(var i=0;i<passIdleCallbacks.length;++i){_callTimer(passIdleCallbacks[i],frameTime);}}if(requestIdleCallbacks.length===0){Timing.setSendIdleEvents(false);}if(errors){errors.forEach(function(error){return JSTimers.setTimeout(function(){throw error;},0);});}},callImmediates:function callImmediates(){errors=null;while(_callImmediatesPass()){}if(errors){errors.forEach(function(error){return JSTimers.setTimeout(function(){throw error;},0);});}},emitTimeDriftWarning:function emitTimeDriftWarning(warningMessage){if(hasEmittedTimeDriftWarning){return;}hasEmittedTimeDriftWarning=true;console.warn(warningMessage);}};var ExportedJSTimers;if(!Timing){console.warn(\"Timing native module is not available, can't set timers.\");ExportedJSTimers={callImmediates:JSTimers.callImmediates,setImmediate:JSTimers.setImmediate};}else{ExportedJSTimers=JSTimers;}BatchedBridge.setImmediatesCallback(ExportedJSTimers.callImmediates.bind(ExportedJSTimers));module.exports=ExportedJSTimers;;(function(){var reactHotLoader=require('react-hot-loader').default;var leaveModule=require('react-hot-loader').leaveModule;if(!reactHotLoader){return;}reactHotLoader.register(_performanceNow,\"_performanceNow\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(performanceNow,\"performanceNow\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(FRAME_DURATION,\"FRAME_DURATION\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(IDLE_CALLBACK_FRAME_DEADLINE,\"IDLE_CALLBACK_FRAME_DEADLINE\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(MAX_TIMER_DURATION_MS,\"MAX_TIMER_DURATION_MS\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(IS_ANDROID,\"IS_ANDROID\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(ANDROID_LONG_TIMER_MESSAGE,\"ANDROID_LONG_TIMER_MESSAGE\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(callbacks,\"callbacks\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(types,\"types\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(timerIDs,\"timerIDs\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(immediates,\"immediates\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(requestIdleCallbacks,\"requestIdleCallbacks\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(requestIdleCallbackTimeouts,\"requestIdleCallbackTimeouts\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(identifiers,\"identifiers\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(GUID,\"GUID\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(errors,\"errors\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(hasEmittedTimeDriftWarning,\"hasEmittedTimeDriftWarning\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(_getFreeIndex,\"_getFreeIndex\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(_allocateCallback,\"_allocateCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(_callTimer,\"_callTimer\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(_callImmediatesPass,\"_callImmediatesPass\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(_clearIndex,\"_clearIndex\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(_freeCallback,\"_freeCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(JSTimers,\"JSTimers\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");reactHotLoader.register(ExportedJSTimers,\"ExportedJSTimers\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js\");leaveModule(module);})();;",{"version":3,"sources":["/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Core/Timers/JSTimers.js"],"names":["Platform","require","Systrace","invariant","Timing","BatchedBridge","_performanceNow","performanceNow","FRAME_DURATION","IDLE_CALLBACK_FRAME_DEADLINE","MAX_TIMER_DURATION_MS","IS_ANDROID","OS","ANDROID_LONG_TIMER_MESSAGE","callbacks","types","timerIDs","immediates","requestIdleCallbacks","requestIdleCallbackTimeouts","identifiers","GUID","errors","hasEmittedTimeDriftWarning","_getFreeIndex","freeIndex","indexOf","length","_allocateCallback","func","type","id","__DEV__","parseErrorStack","error","Error","framesToPop","stack","shift","_callTimer","timerID","frameTime","didTimeout","timerIndex","callback","console","identifier","beginEvent","methodName","_clearIndex","timeRemaining","Math","max","e","push","endEvent","_callImmediatesPass","passImmediates","slice","i","_freeCallback","index","deleteTimer","JSTimers","setTimeout","duration","args","warn","apply","undefined","createTimer","Date","now","setInterval","setImmediate","requestAnimationFrame","requestIdleCallback","options","setSendIdleEvents","timeout","deadline","timeoutId","clearTimeout","splice","cancelIdleCallback","clearInterval","clearImmediate","cancelAnimationFrame","callTimers","timersToCall","errorCount","ii","bind","callIdleCallbacks","passIdleCallbacks","forEach","callImmediates","emitTimeDriftWarning","warningMessage","ExportedJSTimers","setImmediatesCallback","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n'use strict';\n\nconst Platform = require('Platform');\nconst Systrace = require('Systrace');\n\nconst invariant = require('fbjs/lib/invariant');\nconst {Timing} = require('NativeModules');\nconst BatchedBridge = require('BatchedBridge');\n\nimport type {ExtendedError} from 'parseErrorStack';\n\nlet _performanceNow = null;\nfunction performanceNow() {\n  if (!_performanceNow) {\n    /* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses an\n     * error found when Flow v0.54 was deployed. To see the error delete this\n     * comment and run Flow. */\n    _performanceNow = require('fbjs/lib/performanceNow');\n  }\n  return _performanceNow();\n}\n\n/**\n * JS implementation of timer functions. Must be completely driven by an\n * external clock signal, all that's stored here is timerID, timer type, and\n * callback.\n */\n\nexport type JSTimerType =\n  | 'setTimeout'\n  | 'setInterval'\n  | 'requestAnimationFrame'\n  | 'setImmediate'\n  | 'requestIdleCallback';\n\n// These timing constants should be kept in sync with the ones in native ios and\n// android `RCTTiming` module.\nconst FRAME_DURATION = 1000 / 60;\nconst IDLE_CALLBACK_FRAME_DEADLINE = 1;\n\nconst MAX_TIMER_DURATION_MS = 60 * 1000;\nconst IS_ANDROID = Platform.OS === 'android';\nconst ANDROID_LONG_TIMER_MESSAGE =\n  'Setting a timer for a long period of time, i.e. multiple minutes, is a ' +\n  'performance and correctness issue on Android as it keeps the timer ' +\n  'module awake, and timers can only be called when the app is in the foreground. ' +\n  'See https://github.com/facebook/react-native/issues/12981 for more info.';\n\n// Parallel arrays\nconst callbacks: Array<?Function> = [];\nconst types: Array<?JSTimerType> = [];\nconst timerIDs: Array<?number> = [];\nlet immediates: Array<number> = [];\nlet requestIdleCallbacks: Array<number> = [];\nconst requestIdleCallbackTimeouts: {[number]: number} = {};\nconst identifiers: Array<null | {methodName: string}> = [];\n\nlet GUID = 1;\nlet errors: ?Array<Error> = null;\n\nlet hasEmittedTimeDriftWarning = false;\n\n// Returns a free index if one is available, and the next consecutive index otherwise.\nfunction _getFreeIndex(): number {\n  let freeIndex = timerIDs.indexOf(null);\n  if (freeIndex === -1) {\n    freeIndex = timerIDs.length;\n  }\n  return freeIndex;\n}\n\nfunction _allocateCallback(func: Function, type: JSTimerType): number {\n  const id = GUID++;\n  const freeIndex = _getFreeIndex();\n  timerIDs[freeIndex] = id;\n  callbacks[freeIndex] = func;\n  types[freeIndex] = type;\n  if (__DEV__) {\n    const parseErrorStack = require('parseErrorStack');\n    const error: ExtendedError = new Error();\n    error.framesToPop = 1;\n    const stack = parseErrorStack(error);\n    if (stack) {\n      identifiers[freeIndex] = stack.shift();\n    }\n  }\n  return id;\n}\n\n/**\n * Calls the callback associated with the ID. Also unregister that callback\n * if it was a one time timer (setTimeout), and not unregister it if it was\n * recurring (setInterval).\n */\nfunction _callTimer(timerID: number, frameTime: number, didTimeout: ?boolean) {\n  /* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses an\n   * error found when Flow v0.54 was deployed. To see the error delete this\n   * comment and run Flow. */\n  require('fbjs/lib/warning')(\n    timerID <= GUID,\n    'Tried to call timer with ID %s but no such timer exists.',\n    timerID,\n  );\n\n  // timerIndex of -1 means that no timer with that ID exists. There are\n  // two situations when this happens, when a garbage timer ID was given\n  // and when a previously existing timer was deleted before this callback\n  // fired. In both cases we want to ignore the timer id, but in the former\n  // case we warn as well.\n  const timerIndex = timerIDs.indexOf(timerID);\n  if (timerIndex === -1) {\n    return;\n  }\n\n  const type = types[timerIndex];\n  const callback = callbacks[timerIndex];\n  if (!callback || !type) {\n    console.error('No callback found for timerID ' + timerID);\n    return;\n  }\n\n  if (__DEV__) {\n    const identifier = identifiers[timerIndex] || {};\n    Systrace.beginEvent('Systrace.callTimer: ' + identifier.methodName);\n  }\n\n  // Clear the metadata\n  if (\n    type === 'setTimeout' ||\n    type === 'setImmediate' ||\n    type === 'requestAnimationFrame' ||\n    type === 'requestIdleCallback'\n  ) {\n    _clearIndex(timerIndex);\n  }\n\n  try {\n    if (\n      type === 'setTimeout' ||\n      type === 'setInterval' ||\n      type === 'setImmediate'\n    ) {\n      callback();\n    } else if (type === 'requestAnimationFrame') {\n      callback(performanceNow());\n    } else if (type === 'requestIdleCallback') {\n      callback({\n        timeRemaining: function() {\n          // TODO: Optimisation: allow running for longer than one frame if\n          // there are no pending JS calls on the bridge from native. This\n          // would require a way to check the bridge queue synchronously.\n          return Math.max(0, FRAME_DURATION - (performanceNow() - frameTime));\n        },\n        didTimeout: !!didTimeout,\n      });\n    } else {\n      console.error('Tried to call a callback with invalid type: ' + type);\n    }\n  } catch (e) {\n    // Don't rethrow so that we can run all timers.\n    if (!errors) {\n      errors = [e];\n    } else {\n      errors.push(e);\n    }\n  }\n\n  if (__DEV__) {\n    Systrace.endEvent();\n  }\n}\n\n/**\n * Performs a single pass over the enqueued immediates. Returns whether\n * more immediates are queued up (can be used as a condition a while loop).\n */\nfunction _callImmediatesPass() {\n  if (__DEV__) {\n    Systrace.beginEvent('callImmediatesPass()');\n  }\n\n  // The main reason to extract a single pass is so that we can track\n  // in the system trace\n  if (immediates.length > 0) {\n    const passImmediates = immediates.slice();\n    immediates = [];\n\n    // Use for loop rather than forEach as per @vjeux's advice\n    // https://github.com/facebook/react-native/commit/c8fd9f7588ad02d2293cac7224715f4af7b0f352#commitcomment-14570051\n    for (let i = 0; i < passImmediates.length; ++i) {\n      _callTimer(passImmediates[i], 0);\n    }\n  }\n\n  if (__DEV__) {\n    Systrace.endEvent();\n  }\n  return immediates.length > 0;\n}\n\nfunction _clearIndex(i: number) {\n  timerIDs[i] = null;\n  callbacks[i] = null;\n  types[i] = null;\n  identifiers[i] = null;\n}\n\nfunction _freeCallback(timerID: number) {\n  // timerIDs contains nulls after timers have been removed;\n  // ignore nulls upfront so indexOf doesn't find them\n  if (timerID == null) {\n    return;\n  }\n\n  const index = timerIDs.indexOf(timerID);\n  // See corresponding comment in `callTimers` for reasoning behind this\n  if (index !== -1) {\n    _clearIndex(index);\n    const type = types[index];\n    if (type !== 'setImmediate' && type !== 'requestIdleCallback') {\n      Timing.deleteTimer(timerID);\n    }\n  }\n}\n\n/**\n * JS implementation of timer functions. Must be completely driven by an\n * external clock signal, all that's stored here is timerID, timer type, and\n * callback.\n */\nconst JSTimers = {\n  /**\n   * @param {function} func Callback to be invoked after `duration` ms.\n   * @param {number} duration Number of milliseconds.\n   */\n  setTimeout: function(func: Function, duration: number, ...args: any): number {\n    if (__DEV__ && IS_ANDROID && duration > MAX_TIMER_DURATION_MS) {\n      console.warn(\n        ANDROID_LONG_TIMER_MESSAGE +\n          '\\n' +\n          '(Saw setTimeout with duration ' +\n          duration +\n          'ms)',\n      );\n    }\n    const id = _allocateCallback(\n      () => func.apply(undefined, args),\n      'setTimeout',\n    );\n    Timing.createTimer(id, duration || 0, Date.now(), /* recurring */ false);\n    return id;\n  },\n\n  /**\n   * @param {function} func Callback to be invoked every `duration` ms.\n   * @param {number} duration Number of milliseconds.\n   */\n  setInterval: function(\n    func: Function,\n    duration: number,\n    ...args: any\n  ): number {\n    if (__DEV__ && IS_ANDROID && duration > MAX_TIMER_DURATION_MS) {\n      console.warn(\n        ANDROID_LONG_TIMER_MESSAGE +\n          '\\n' +\n          '(Saw setInterval with duration ' +\n          duration +\n          'ms)',\n      );\n    }\n    const id = _allocateCallback(\n      () => func.apply(undefined, args),\n      'setInterval',\n    );\n    Timing.createTimer(id, duration || 0, Date.now(), /* recurring */ true);\n    return id;\n  },\n\n  /**\n   * @param {function} func Callback to be invoked before the end of the\n   * current JavaScript execution loop.\n   */\n  setImmediate: function(func: Function, ...args: any) {\n    const id = _allocateCallback(\n      () => func.apply(undefined, args),\n      'setImmediate',\n    );\n    immediates.push(id);\n    return id;\n  },\n\n  /**\n   * @param {function} func Callback to be invoked every frame.\n   */\n  requestAnimationFrame: function(func: Function) {\n    const id = _allocateCallback(func, 'requestAnimationFrame');\n    Timing.createTimer(id, 1, Date.now(), /* recurring */ false);\n    return id;\n  },\n\n  /**\n   * @param {function} func Callback to be invoked every frame and provided\n   * with time remaining in frame.\n   * @param {?object} options\n   */\n  requestIdleCallback: function(func: Function, options: ?Object) {\n    if (requestIdleCallbacks.length === 0) {\n      Timing.setSendIdleEvents(true);\n    }\n\n    const timeout = options && options.timeout;\n    const id = _allocateCallback(\n      timeout != null\n        ? deadline => {\n            const timeoutId = requestIdleCallbackTimeouts[id];\n            if (timeoutId) {\n              JSTimers.clearTimeout(timeoutId);\n              delete requestIdleCallbackTimeouts[id];\n            }\n            return func(deadline);\n          }\n        : func,\n      'requestIdleCallback',\n    );\n    requestIdleCallbacks.push(id);\n\n    if (timeout != null) {\n      const timeoutId = JSTimers.setTimeout(() => {\n        const index = requestIdleCallbacks.indexOf(id);\n        if (index > -1) {\n          requestIdleCallbacks.splice(index, 1);\n          _callTimer(id, performanceNow(), true);\n        }\n        delete requestIdleCallbackTimeouts[id];\n        if (requestIdleCallbacks.length === 0) {\n          Timing.setSendIdleEvents(false);\n        }\n      }, timeout);\n      requestIdleCallbackTimeouts[id] = timeoutId;\n    }\n    return id;\n  },\n\n  cancelIdleCallback: function(timerID: number) {\n    _freeCallback(timerID);\n    const index = requestIdleCallbacks.indexOf(timerID);\n    if (index !== -1) {\n      requestIdleCallbacks.splice(index, 1);\n    }\n\n    const timeoutId = requestIdleCallbackTimeouts[timerID];\n    if (timeoutId) {\n      JSTimers.clearTimeout(timeoutId);\n      delete requestIdleCallbackTimeouts[timerID];\n    }\n\n    if (requestIdleCallbacks.length === 0) {\n      Timing.setSendIdleEvents(false);\n    }\n  },\n\n  clearTimeout: function(timerID: number) {\n    _freeCallback(timerID);\n  },\n\n  clearInterval: function(timerID: number) {\n    _freeCallback(timerID);\n  },\n\n  clearImmediate: function(timerID: number) {\n    _freeCallback(timerID);\n    const index = immediates.indexOf(timerID);\n    if (index !== -1) {\n      immediates.splice(index, 1);\n    }\n  },\n\n  cancelAnimationFrame: function(timerID: number) {\n    _freeCallback(timerID);\n  },\n\n  /**\n   * This is called from the native side. We are passed an array of timerIDs,\n   * and\n   */\n  callTimers: function(timersToCall: Array<number>) {\n    invariant(\n      timersToCall.length !== 0,\n      'Cannot call `callTimers` with an empty list of IDs.',\n    );\n\n    // $FlowFixMe: optionals do not allow assignment from null\n    errors = null;\n    for (let i = 0; i < timersToCall.length; i++) {\n      _callTimer(timersToCall[i], 0);\n    }\n\n    if (errors) {\n      const errorCount = errors.length;\n      if (errorCount > 1) {\n        // Throw all the other errors in a setTimeout, which will throw each\n        // error one at a time\n        for (let ii = 1; ii < errorCount; ii++) {\n          JSTimers.setTimeout(\n            (error => {\n              throw error;\n            }).bind(null, errors[ii]),\n            0,\n          );\n        }\n      }\n      throw errors[0];\n    }\n  },\n\n  callIdleCallbacks: function(frameTime: number) {\n    if (\n      FRAME_DURATION - (performanceNow() - frameTime) <\n      IDLE_CALLBACK_FRAME_DEADLINE\n    ) {\n      return;\n    }\n\n    // $FlowFixMe: optionals do not allow assignment from null\n    errors = null;\n    if (requestIdleCallbacks.length > 0) {\n      const passIdleCallbacks = requestIdleCallbacks.slice();\n      requestIdleCallbacks = [];\n\n      for (let i = 0; i < passIdleCallbacks.length; ++i) {\n        _callTimer(passIdleCallbacks[i], frameTime);\n      }\n    }\n\n    if (requestIdleCallbacks.length === 0) {\n      Timing.setSendIdleEvents(false);\n    }\n\n    if (errors) {\n      errors.forEach(error =>\n        JSTimers.setTimeout(() => {\n          throw error;\n        }, 0),\n      );\n    }\n  },\n\n  /**\n   * This is called after we execute any command we receive from native but\n   * before we hand control back to native.\n   */\n  callImmediates() {\n    errors = null;\n    while (_callImmediatesPass()) {}\n    if (errors) {\n      errors.forEach(error =>\n        JSTimers.setTimeout(() => {\n          throw error;\n        }, 0),\n      );\n    }\n  },\n\n  /**\n   * Called from native (in development) when environment times are out-of-sync.\n   */\n  emitTimeDriftWarning(warningMessage: string) {\n    if (hasEmittedTimeDriftWarning) {\n      return;\n    }\n    hasEmittedTimeDriftWarning = true;\n    console.warn(warningMessage);\n  },\n};\n\nlet ExportedJSTimers;\nif (!Timing) {\n  console.warn(\"Timing native module is not available, can't set timers.\");\n  // $FlowFixMe: we can assume timers are generally available\n  ExportedJSTimers = ({\n    callImmediates: JSTimers.callImmediates,\n    setImmediate: JSTimers.setImmediate,\n  }: typeof JSTimers);\n} else {\n  ExportedJSTimers = JSTimers;\n}\n\nBatchedBridge.setImmediatesCallback(\n  ExportedJSTimers.callImmediates.bind(ExportedJSTimers),\n);\n\nmodule.exports = ExportedJSTimers;\n"]}]}