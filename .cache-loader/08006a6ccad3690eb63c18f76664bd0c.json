{"remainingRequest":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js","dependencies":[{"path":"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js","mtime":1539700108130},{"path":"/Users/jeffrey/HaulTesting/node_modules/cache-loader/dist/cjs.js","mtime":1539652983212},{"path":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js","mtime":1539652983315},{"path":"/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js","mtime":1539615827828}],"contextDependencies":[],"result":["'use strict';(function(){var enterModule=require('react-hot-loader').enterModule;enterModule&&enterModule(module);})();var RCTWebSocketModule=require('NativeModules').WebSocketModule;var NativeEventEmitter=require('NativeEventEmitter');var base64=require('base64-js');var originalRCTWebSocketConnect=RCTWebSocketModule.connect;var originalRCTWebSocketSend=RCTWebSocketModule.send;var originalRCTWebSocketSendBinary=RCTWebSocketModule.sendBinary;var originalRCTWebSocketClose=RCTWebSocketModule.close;var eventEmitter;var subscriptions;var closeCallback;var sendCallback;var connectCallback;var onOpenCallback;var onMessageCallback;var onErrorCallback;var onCloseCallback;var _isInterceptorEnabled=false;var WebSocketInterceptor={setCloseCallback:function setCloseCallback(callback){closeCallback=callback;},setSendCallback:function setSendCallback(callback){sendCallback=callback;},setConnectCallback:function setConnectCallback(callback){connectCallback=callback;},setOnOpenCallback:function setOnOpenCallback(callback){onOpenCallback=callback;},setOnMessageCallback:function setOnMessageCallback(callback){onMessageCallback=callback;},setOnErrorCallback:function setOnErrorCallback(callback){onErrorCallback=callback;},setOnCloseCallback:function setOnCloseCallback(callback){onCloseCallback=callback;},isInterceptorEnabled:function isInterceptorEnabled(){return _isInterceptorEnabled;},_unregisterEvents:function _unregisterEvents(){subscriptions.forEach(function(e){return e.remove();});subscriptions=[];},_registerEvents:function _registerEvents(){subscriptions=[eventEmitter.addListener('websocketMessage',function(ev){if(onMessageCallback){onMessageCallback(ev.id,ev.type==='binary'?WebSocketInterceptor._arrayBufferToString(ev.data):ev.data);}}),eventEmitter.addListener('websocketOpen',function(ev){if(onOpenCallback){onOpenCallback(ev.id);}}),eventEmitter.addListener('websocketClosed',function(ev){if(onCloseCallback){onCloseCallback(ev.id,{code:ev.code,reason:ev.reason});}}),eventEmitter.addListener('websocketFailed',function(ev){if(onErrorCallback){onErrorCallback(ev.id,{message:ev.message});}})];},enableInterception:function enableInterception(){if(_isInterceptorEnabled){return;}eventEmitter=new NativeEventEmitter(RCTWebSocketModule);WebSocketInterceptor._registerEvents();RCTWebSocketModule.connect=function(url,protocols,options,socketId){if(connectCallback){connectCallback(url,protocols,options,socketId);}originalRCTWebSocketConnect.apply(this,arguments);};RCTWebSocketModule.send=function(data,socketId){if(sendCallback){sendCallback(data,socketId);}originalRCTWebSocketSend.apply(this,arguments);};RCTWebSocketModule.sendBinary=function(data,socketId){if(sendCallback){sendCallback(WebSocketInterceptor._arrayBufferToString(data),socketId);}originalRCTWebSocketSendBinary.apply(this,arguments);};RCTWebSocketModule.close=function(){if(closeCallback){if(arguments.length===3){closeCallback(arguments[0],arguments[1],arguments[2]);}else{closeCallback(null,null,arguments[0]);}}originalRCTWebSocketClose.apply(this,arguments);};_isInterceptorEnabled=true;},_arrayBufferToString:function _arrayBufferToString(data){var value=base64.toByteArray(data).buffer;if(value===undefined||value===null){return'(no value)';}if(typeof ArrayBuffer!=='undefined'&&typeof Uint8Array!=='undefined'&&value instanceof ArrayBuffer){return\"ArrayBuffer {\"+String(Array.from(new Uint8Array(value)))+\"}\";}return value;},disableInterception:function disableInterception(){if(!_isInterceptorEnabled){return;}_isInterceptorEnabled=false;RCTWebSocketModule.send=originalRCTWebSocketSend;RCTWebSocketModule.sendBinary=originalRCTWebSocketSendBinary;RCTWebSocketModule.close=originalRCTWebSocketClose;RCTWebSocketModule.connect=originalRCTWebSocketConnect;connectCallback=null;closeCallback=null;sendCallback=null;onOpenCallback=null;onMessageCallback=null;onCloseCallback=null;onErrorCallback=null;WebSocketInterceptor._unregisterEvents();}};module.exports=WebSocketInterceptor;;(function(){var reactHotLoader=require('react-hot-loader').default;var leaveModule=require('react-hot-loader').leaveModule;if(!reactHotLoader){return;}reactHotLoader.register(RCTWebSocketModule,\"RCTWebSocketModule\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(originalRCTWebSocketConnect,\"originalRCTWebSocketConnect\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(originalRCTWebSocketSend,\"originalRCTWebSocketSend\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(originalRCTWebSocketSendBinary,\"originalRCTWebSocketSendBinary\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(originalRCTWebSocketClose,\"originalRCTWebSocketClose\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(eventEmitter,\"eventEmitter\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(subscriptions,\"subscriptions\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(closeCallback,\"closeCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(sendCallback,\"sendCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(connectCallback,\"connectCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(onOpenCallback,\"onOpenCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(onMessageCallback,\"onMessageCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(onErrorCallback,\"onErrorCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(onCloseCallback,\"onCloseCallback\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(_isInterceptorEnabled,\"isInterceptorEnabled\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");reactHotLoader.register(WebSocketInterceptor,\"WebSocketInterceptor\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js\");leaveModule(module);})();;",{"version":3,"sources":["/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/WebSocket/WebSocketInterceptor.js"],"names":["RCTWebSocketModule","require","WebSocketModule","NativeEventEmitter","base64","originalRCTWebSocketConnect","connect","originalRCTWebSocketSend","send","originalRCTWebSocketSendBinary","sendBinary","originalRCTWebSocketClose","close","eventEmitter","subscriptions","closeCallback","sendCallback","connectCallback","onOpenCallback","onMessageCallback","onErrorCallback","onCloseCallback","isInterceptorEnabled","WebSocketInterceptor","setCloseCallback","callback","setSendCallback","setConnectCallback","setOnOpenCallback","setOnMessageCallback","setOnErrorCallback","setOnCloseCallback","_unregisterEvents","forEach","e","remove","_registerEvents","addListener","ev","id","type","_arrayBufferToString","data","code","reason","message","enableInterception","url","protocols","options","socketId","apply","arguments","length","value","toByteArray","buffer","undefined","ArrayBuffer","Uint8Array","String","Array","from","disableInterception","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n */\n\n'use strict';\n\nconst RCTWebSocketModule = require('NativeModules').WebSocketModule;\nconst NativeEventEmitter = require('NativeEventEmitter');\n\nconst base64 = require('base64-js');\n\nconst originalRCTWebSocketConnect = RCTWebSocketModule.connect;\nconst originalRCTWebSocketSend = RCTWebSocketModule.send;\nconst originalRCTWebSocketSendBinary = RCTWebSocketModule.sendBinary;\nconst originalRCTWebSocketClose = RCTWebSocketModule.close;\n\nlet eventEmitter: NativeEventEmitter;\nlet subscriptions: Array<EventSubscription>;\n\nlet closeCallback;\nlet sendCallback;\nlet connectCallback;\nlet onOpenCallback;\nlet onMessageCallback;\nlet onErrorCallback;\nlet onCloseCallback;\n\nlet isInterceptorEnabled = false;\n\n/**\n * A network interceptor which monkey-patches RCTWebSocketModule methods\n * to gather all websocket network requests/responses, in order to show\n * their information in the React Native inspector development tool.\n */\n\nconst WebSocketInterceptor = {\n  /**\n   * Invoked when RCTWebSocketModule.close(...) is called.\n   */\n  setCloseCallback(callback) {\n    closeCallback = callback;\n  },\n\n  /**\n   * Invoked when RCTWebSocketModule.send(...) or sendBinary(...) is called.\n   */\n  setSendCallback(callback) {\n    sendCallback = callback;\n  },\n\n  /**\n   * Invoked when RCTWebSocketModule.connect(...) is called.\n   */\n  setConnectCallback(callback) {\n    connectCallback = callback;\n  },\n\n  /**\n   * Invoked when event \"websocketOpen\" happens.\n   */\n  setOnOpenCallback(callback) {\n    onOpenCallback = callback;\n  },\n\n  /**\n   * Invoked when event \"websocketMessage\" happens.\n   */\n  setOnMessageCallback(callback) {\n    onMessageCallback = callback;\n  },\n\n  /**\n   * Invoked when event \"websocketFailed\" happens.\n   */\n  setOnErrorCallback(callback) {\n    onErrorCallback = callback;\n  },\n\n  /**\n   * Invoked when event \"websocketClosed\" happens.\n   */\n  setOnCloseCallback(callback) {\n    onCloseCallback = callback;\n  },\n\n  isInterceptorEnabled() {\n    return isInterceptorEnabled;\n  },\n\n  _unregisterEvents() {\n    subscriptions.forEach(e => e.remove());\n    subscriptions = [];\n  },\n\n  /**\n   * Add listeners to the RCTWebSocketModule events to intercept them.\n   */\n  _registerEvents() {\n    subscriptions = [\n      eventEmitter.addListener('websocketMessage', ev => {\n        if (onMessageCallback) {\n          onMessageCallback(\n            ev.id,\n            ev.type === 'binary'\n              ? WebSocketInterceptor._arrayBufferToString(ev.data)\n              : ev.data,\n          );\n        }\n      }),\n      eventEmitter.addListener('websocketOpen', ev => {\n        if (onOpenCallback) {\n          onOpenCallback(ev.id);\n        }\n      }),\n      eventEmitter.addListener('websocketClosed', ev => {\n        if (onCloseCallback) {\n          onCloseCallback(ev.id, {code: ev.code, reason: ev.reason});\n        }\n      }),\n      eventEmitter.addListener('websocketFailed', ev => {\n        if (onErrorCallback) {\n          onErrorCallback(ev.id, {message: ev.message});\n        }\n      }),\n    ];\n  },\n\n  enableInterception() {\n    if (isInterceptorEnabled) {\n      return;\n    }\n    eventEmitter = new NativeEventEmitter(RCTWebSocketModule);\n    WebSocketInterceptor._registerEvents();\n\n    // Override `connect` method for all RCTWebSocketModule requests\n    // to intercept the request url, protocols, options and socketId,\n    // then pass them through the `connectCallback`.\n    RCTWebSocketModule.connect = function(url, protocols, options, socketId) {\n      if (connectCallback) {\n        connectCallback(url, protocols, options, socketId);\n      }\n      originalRCTWebSocketConnect.apply(this, arguments);\n    };\n\n    // Override `send` method for all RCTWebSocketModule requests to intercept\n    // the data sent, then pass them through the `sendCallback`.\n    RCTWebSocketModule.send = function(data, socketId) {\n      if (sendCallback) {\n        sendCallback(data, socketId);\n      }\n      originalRCTWebSocketSend.apply(this, arguments);\n    };\n\n    // Override `sendBinary` method for all RCTWebSocketModule requests to\n    // intercept the data sent, then pass them through the `sendCallback`.\n    RCTWebSocketModule.sendBinary = function(data, socketId) {\n      if (sendCallback) {\n        sendCallback(WebSocketInterceptor._arrayBufferToString(data), socketId);\n      }\n      originalRCTWebSocketSendBinary.apply(this, arguments);\n    };\n\n    // Override `close` method for all RCTWebSocketModule requests to intercept\n    // the close information, then pass them through the `closeCallback`.\n    RCTWebSocketModule.close = function() {\n      if (closeCallback) {\n        if (arguments.length === 3) {\n          closeCallback(arguments[0], arguments[1], arguments[2]);\n        } else {\n          closeCallback(null, null, arguments[0]);\n        }\n      }\n      originalRCTWebSocketClose.apply(this, arguments);\n    };\n\n    isInterceptorEnabled = true;\n  },\n\n  _arrayBufferToString(data) {\n    const value = base64.toByteArray(data).buffer;\n    if (value === undefined || value === null) {\n      return '(no value)';\n    }\n    if (\n      typeof ArrayBuffer !== 'undefined' &&\n      typeof Uint8Array !== 'undefined' &&\n      value instanceof ArrayBuffer\n    ) {\n      return `ArrayBuffer {${String(Array.from(new Uint8Array(value)))}}`;\n    }\n    return value;\n  },\n\n  // Unpatch RCTWebSocketModule methods and remove the callbacks.\n  disableInterception() {\n    if (!isInterceptorEnabled) {\n      return;\n    }\n    isInterceptorEnabled = false;\n    RCTWebSocketModule.send = originalRCTWebSocketSend;\n    RCTWebSocketModule.sendBinary = originalRCTWebSocketSendBinary;\n    RCTWebSocketModule.close = originalRCTWebSocketClose;\n    RCTWebSocketModule.connect = originalRCTWebSocketConnect;\n\n    connectCallback = null;\n    closeCallback = null;\n    sendCallback = null;\n    onOpenCallback = null;\n    onMessageCallback = null;\n    onCloseCallback = null;\n    onErrorCallback = null;\n\n    WebSocketInterceptor._unregisterEvents();\n  },\n};\n\nmodule.exports = WebSocketInterceptor;\n"]}]}