{"remainingRequest":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js","dependencies":[{"path":"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js","mtime":1539700108130},{"path":"/Users/jeffrey/HaulTesting/node_modules/cache-loader/dist/cjs.js","mtime":1539652983212},{"path":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js","mtime":1539652983315},{"path":"/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js","mtime":1539615827828}],"contextDependencies":[],"result":["'use strict';var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var _get2=_interopRequireDefault(require(\"@babel/runtime/helpers/get\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));(function(){var enterModule=require('react-hot-loader').enterModule;enterModule&&enterModule(module);})();var EventTarget=require('event-target-shim');var RCTNetworking=require('RCTNetworking');var base64=require('base64-js');var invariant=require('fbjs/lib/invariant');var warning=require('fbjs/lib/warning');var BlobManager=require('BlobManager');if(BlobManager.isAvailable){BlobManager.addNetworkingHandler();}var UNSENT=0;var OPENED=1;var HEADERS_RECEIVED=2;var LOADING=3;var DONE=4;var SUPPORTED_RESPONSE_TYPES={arraybuffer:typeof global.ArrayBuffer==='function',blob:typeof global.Blob==='function',document:false,json:true,text:true,'':true};var REQUEST_EVENTS=['abort','error','load','loadstart','progress','timeout','loadend'];var XHR_EVENTS=REQUEST_EVENTS.concat('readystatechange');var XMLHttpRequestEventTarget=function(_EventTarget){(0,_inherits2.default)(XMLHttpRequestEventTarget,_EventTarget);function XMLHttpRequestEventTarget(){(0,_classCallCheck2.default)(this,XMLHttpRequestEventTarget);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(XMLHttpRequestEventTarget).apply(this,arguments));}(0,_createClass2.default)(XMLHttpRequestEventTarget,[{key:\"__reactstandin__regenerateByEval\",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code);}}]);return XMLHttpRequestEventTarget;}(EventTarget.apply(void 0,REQUEST_EVENTS));var XMLHttpRequest=function(_EventTarget2){(0,_inherits2.default)(XMLHttpRequest,_EventTarget2);(0,_createClass2.default)(XMLHttpRequest,null,[{key:\"setInterceptor\",value:function setInterceptor(interceptor){XMLHttpRequest._interceptor=interceptor;}}]);function XMLHttpRequest(){var _this;(0,_classCallCheck2.default)(this,XMLHttpRequest);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(XMLHttpRequest).call(this));_this.UNSENT=UNSENT;_this.OPENED=OPENED;_this.HEADERS_RECEIVED=HEADERS_RECEIVED;_this.LOADING=LOADING;_this.DONE=DONE;_this.readyState=UNSENT;_this.status=0;_this.timeout=0;_this.withCredentials=true;_this.upload=new XMLHttpRequestEventTarget();_this._aborted=false;_this._hasError=false;_this._method=null;_this._response='';_this._url=null;_this._timedOut=false;_this._trackingName='unknown';_this._incrementalEvents=false;_this._reset();return _this;}(0,_createClass2.default)(XMLHttpRequest,[{key:\"_reset\",value:function _reset(){this.readyState=this.UNSENT;this.responseHeaders=undefined;this.status=0;delete this.responseURL;this._requestId=null;this._cachedResponse=undefined;this._hasError=false;this._headers={};this._response='';this._responseType='';this._sent=false;this._lowerCaseResponseHeaders={};this._clearSubscriptions();this._timedOut=false;}},{key:\"__didCreateRequest\",value:function __didCreateRequest(requestId){this._requestId=requestId;XMLHttpRequest._interceptor&&XMLHttpRequest._interceptor.requestSent(requestId,this._url||'',this._method||'GET',this._headers);}},{key:\"__didUploadProgress\",value:function __didUploadProgress(requestId,progress,total){if(requestId===this._requestId){this.upload.dispatchEvent({type:'progress',lengthComputable:true,loaded:progress,total:total});}}},{key:\"__didReceiveResponse\",value:function __didReceiveResponse(requestId,status,responseHeaders,responseURL){if(requestId===this._requestId){this.status=status;this.setResponseHeaders(responseHeaders);this.setReadyState(this.HEADERS_RECEIVED);if(responseURL||responseURL===''){this.responseURL=responseURL;}else{delete this.responseURL;}XMLHttpRequest._interceptor&&XMLHttpRequest._interceptor.responseReceived(requestId,responseURL||this._url||'',status,responseHeaders||{});}}},{key:\"__didReceiveData\",value:function __didReceiveData(requestId,response){if(requestId!==this._requestId){return;}this._response=response;this._cachedResponse=undefined;this.setReadyState(this.LOADING);XMLHttpRequest._interceptor&&XMLHttpRequest._interceptor.dataReceived(requestId,response);}},{key:\"__didReceiveIncrementalData\",value:function __didReceiveIncrementalData(requestId,responseText,progress,total){if(requestId!==this._requestId){return;}if(!this._response){this._response=responseText;}else{this._response+=responseText;}XMLHttpRequest._interceptor&&XMLHttpRequest._interceptor.dataReceived(requestId,responseText);this.setReadyState(this.LOADING);this.__didReceiveDataProgress(requestId,progress,total);}},{key:\"__didReceiveDataProgress\",value:function __didReceiveDataProgress(requestId,loaded,total){if(requestId!==this._requestId){return;}this.dispatchEvent({type:'progress',lengthComputable:total>=0,loaded:loaded,total:total});}},{key:\"__didCompleteResponse\",value:function __didCompleteResponse(requestId,error,timeOutError){if(requestId===this._requestId){if(error){if(this._responseType===''||this._responseType==='text'){this._response=error;}this._hasError=true;if(timeOutError){this._timedOut=true;}}this._clearSubscriptions();this._requestId=null;this.setReadyState(this.DONE);if(error){XMLHttpRequest._interceptor&&XMLHttpRequest._interceptor.loadingFailed(requestId,error);}else{XMLHttpRequest._interceptor&&XMLHttpRequest._interceptor.loadingFinished(requestId,this._response.length);}}}},{key:\"_clearSubscriptions\",value:function _clearSubscriptions(){(this._subscriptions||[]).forEach(function(sub){if(sub){sub.remove();}});this._subscriptions=[];}},{key:\"getAllResponseHeaders\",value:function getAllResponseHeaders(){if(!this.responseHeaders){return null;}var headers=this.responseHeaders||{};return Object.keys(headers).map(function(headerName){return headerName+': '+headers[headerName];}).join('\\r\\n');}},{key:\"getResponseHeader\",value:function getResponseHeader(header){var value=this._lowerCaseResponseHeaders[header.toLowerCase()];return value!==undefined?value:null;}},{key:\"setRequestHeader\",value:function setRequestHeader(header,value){if(this.readyState!==this.OPENED){throw new Error('Request has not been opened');}this._headers[header.toLowerCase()]=String(value);}},{key:\"setTrackingName\",value:function setTrackingName(trackingName){this._trackingName=trackingName;return this;}},{key:\"open\",value:function open(method,url,async){if(this.readyState!==this.UNSENT){throw new Error('Cannot open, already sending');}if(async!==undefined&&!async){throw new Error('Synchronous http requests are not supported');}if(!url){throw new Error('Cannot load an empty url');}this._method=method.toUpperCase();this._url=url;this._aborted=false;this.setReadyState(this.OPENED);}},{key:\"send\",value:function send(data){var _this2=this;if(this.readyState!==this.OPENED){throw new Error('Request has not been opened');}if(this._sent){throw new Error('Request has already been sent');}this._sent=true;var incrementalEvents=this._incrementalEvents||!!this.onreadystatechange||!!this.onprogress;this._subscriptions.push(RCTNetworking.addListener('didSendNetworkData',function(args){return _this2.__didUploadProgress.apply(_this2,(0,_toConsumableArray2.default)(args));}));this._subscriptions.push(RCTNetworking.addListener('didReceiveNetworkResponse',function(args){return _this2.__didReceiveResponse.apply(_this2,(0,_toConsumableArray2.default)(args));}));this._subscriptions.push(RCTNetworking.addListener('didReceiveNetworkData',function(args){return _this2.__didReceiveData.apply(_this2,(0,_toConsumableArray2.default)(args));}));this._subscriptions.push(RCTNetworking.addListener('didReceiveNetworkIncrementalData',function(args){return _this2.__didReceiveIncrementalData.apply(_this2,(0,_toConsumableArray2.default)(args));}));this._subscriptions.push(RCTNetworking.addListener('didReceiveNetworkDataProgress',function(args){return _this2.__didReceiveDataProgress.apply(_this2,(0,_toConsumableArray2.default)(args));}));this._subscriptions.push(RCTNetworking.addListener('didCompleteNetworkResponse',function(args){return _this2.__didCompleteResponse.apply(_this2,(0,_toConsumableArray2.default)(args));}));var nativeResponseType='text';if(this._responseType==='arraybuffer'){nativeResponseType='base64';}if(this._responseType==='blob'){nativeResponseType='blob';}invariant(this._method,'Request method needs to be defined.');invariant(this._url,'Request URL needs to be defined.');RCTNetworking.sendRequest(this._method,this._trackingName,this._url,this._headers,data,nativeResponseType,incrementalEvents,this.timeout,this.__didCreateRequest.bind(this),this.withCredentials);}},{key:\"abort\",value:function abort(){this._aborted=true;if(this._requestId){RCTNetworking.abortRequest(this._requestId);}if(!(this.readyState===this.UNSENT||this.readyState===this.OPENED&&!this._sent||this.readyState===this.DONE)){this._reset();this.setReadyState(this.DONE);}this._reset();}},{key:\"setResponseHeaders\",value:function setResponseHeaders(responseHeaders){this.responseHeaders=responseHeaders||null;var headers=responseHeaders||{};this._lowerCaseResponseHeaders=Object.keys(headers).reduce(function(lcaseHeaders,headerName){lcaseHeaders[headerName.toLowerCase()]=headers[headerName];return lcaseHeaders;},{});}},{key:\"setReadyState\",value:function setReadyState(newState){this.readyState=newState;this.dispatchEvent({type:'readystatechange'});if(newState===this.DONE){if(this._aborted){this.dispatchEvent({type:'abort'});}else if(this._hasError){if(this._timedOut){this.dispatchEvent({type:'timeout'});}else{this.dispatchEvent({type:'error'});}}else{this.dispatchEvent({type:'load'});}this.dispatchEvent({type:'loadend'});}}},{key:\"addEventListener\",value:function addEventListener(type,listener){if(type==='readystatechange'||type==='progress'){this._incrementalEvents=true;}(0,_get2.default)((0,_getPrototypeOf2.default)(XMLHttpRequest.prototype),\"addEventListener\",this).call(this,type,listener);}},{key:\"__reactstandin__regenerateByEval\",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code);}},{key:\"responseType\",get:function get(){return this._responseType;},set:function set(responseType){if(this._sent){throw new Error(\"Failed to set the 'responseType' property on 'XMLHttpRequest': The \"+'response type cannot be set after the request has been sent.');}if(!SUPPORTED_RESPONSE_TYPES.hasOwnProperty(responseType)){warning(false,\"The provided value '\"+responseType+\"' is not a valid 'responseType'.\");return;}invariant(SUPPORTED_RESPONSE_TYPES[responseType]||responseType==='document',\"The provided value '\"+responseType+\"' is unsupported in this environment.\");if(responseType==='blob'){invariant(BlobManager.isAvailable,'Native module BlobModule is required for blob support');}this._responseType=responseType;}},{key:\"responseText\",get:function get(){if(this._responseType!==''&&this._responseType!=='text'){throw new Error(\"The 'responseText' property is only available if 'responseType' \"+(\"is set to '' or 'text', but it is '\"+this._responseType+\"'.\"));}if(this.readyState<LOADING){return'';}return this._response;}},{key:\"response\",get:function get(){var responseType=this.responseType;if(responseType===''||responseType==='text'){return this.readyState<LOADING||this._hasError?'':this._response;}if(this.readyState!==DONE){return null;}if(this._cachedResponse!==undefined){return this._cachedResponse;}switch(responseType){case'document':this._cachedResponse=null;break;case'arraybuffer':this._cachedResponse=base64.toByteArray(this._response).buffer;break;case'blob':if(typeof this._response==='object'&&this._response){this._cachedResponse=BlobManager.createFromOptions(this._response);}else if(this._response===''){this._cachedResponse=null;}else{throw new Error(\"Invalid response for blob: \"+this._response);}break;case'json':try{this._cachedResponse=JSON.parse(this._response);}catch(_){this._cachedResponse=null;}break;default:this._cachedResponse=null;}return this._cachedResponse;}}]);return XMLHttpRequest;}(EventTarget.apply(void 0,(0,_toConsumableArray2.default)(XHR_EVENTS)));XMLHttpRequest.UNSENT=UNSENT;XMLHttpRequest.OPENED=OPENED;XMLHttpRequest.HEADERS_RECEIVED=HEADERS_RECEIVED;XMLHttpRequest.LOADING=LOADING;XMLHttpRequest.DONE=DONE;XMLHttpRequest._interceptor=null;module.exports=XMLHttpRequest;;(function(){var reactHotLoader=require('react-hot-loader').default;var leaveModule=require('react-hot-loader').leaveModule;if(!reactHotLoader){return;}reactHotLoader.register(UNSENT,\"UNSENT\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(OPENED,\"OPENED\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(HEADERS_RECEIVED,\"HEADERS_RECEIVED\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(LOADING,\"LOADING\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(DONE,\"DONE\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(SUPPORTED_RESPONSE_TYPES,\"SUPPORTED_RESPONSE_TYPES\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(REQUEST_EVENTS,\"REQUEST_EVENTS\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(XHR_EVENTS,\"XHR_EVENTS\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(XMLHttpRequestEventTarget,\"XMLHttpRequestEventTarget\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");reactHotLoader.register(XMLHttpRequest,\"XMLHttpRequest\",\"/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js\");leaveModule(module);})();;",{"version":3,"sources":["/Users/jeffrey/HaulTesting/node_modules/react-native/Libraries/Network/XMLHttpRequest.js"],"names":["EventTarget","require","RCTNetworking","base64","invariant","warning","BlobManager","isAvailable","addNetworkingHandler","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","SUPPORTED_RESPONSE_TYPES","arraybuffer","global","ArrayBuffer","blob","Blob","document","json","text","REQUEST_EVENTS","XHR_EVENTS","concat","XMLHttpRequestEventTarget","XMLHttpRequest","interceptor","_interceptor","readyState","status","timeout","withCredentials","upload","_aborted","_hasError","_method","_response","_url","_timedOut","_trackingName","_incrementalEvents","_reset","responseHeaders","undefined","responseURL","_requestId","_cachedResponse","_headers","_responseType","_sent","_lowerCaseResponseHeaders","_clearSubscriptions","requestId","requestSent","progress","total","dispatchEvent","type","lengthComputable","loaded","setResponseHeaders","setReadyState","responseReceived","response","dataReceived","responseText","__didReceiveDataProgress","error","timeOutError","loadingFailed","loadingFinished","length","_subscriptions","forEach","sub","remove","headers","Object","keys","map","headerName","join","header","value","toLowerCase","Error","String","trackingName","method","url","async","toUpperCase","data","incrementalEvents","onreadystatechange","onprogress","push","addListener","args","__didUploadProgress","__didReceiveResponse","__didReceiveData","__didReceiveIncrementalData","__didCompleteResponse","nativeResponseType","sendRequest","__didCreateRequest","bind","abortRequest","reduce","lcaseHeaders","newState","listener","responseType","hasOwnProperty","toByteArray","buffer","createFromOptions","JSON","parse","_","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nconst EventTarget = require('event-target-shim');\nconst RCTNetworking = require('RCTNetworking');\n\n/* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses an error\n * found when Flow v0.54 was deployed. To see the error delete this comment and\n * run Flow. */\nconst base64 = require('base64-js');\nconst invariant = require('fbjs/lib/invariant');\n/* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses an error\n * found when Flow v0.54 was deployed. To see the error delete this comment and\n * run Flow. */\nconst warning = require('fbjs/lib/warning');\nconst BlobManager = require('BlobManager');\n\nexport type NativeResponseType = 'base64' | 'blob' | 'text';\nexport type ResponseType =\n  | ''\n  | 'arraybuffer'\n  | 'blob'\n  | 'document'\n  | 'json'\n  | 'text';\nexport type Response = ?Object | string;\n\ntype XHRInterceptor = {\n  requestSent(id: number, url: string, method: string, headers: Object): void,\n  responseReceived(\n    id: number,\n    url: string,\n    status: number,\n    headers: Object,\n  ): void,\n  dataReceived(id: number, data: string): void,\n  loadingFinished(id: number, encodedDataLength: number): void,\n  loadingFailed(id: number, error: string): void,\n};\n\n// The native blob module is optional so inject it here if available.\nif (BlobManager.isAvailable) {\n  BlobManager.addNetworkingHandler();\n}\n\nconst UNSENT = 0;\nconst OPENED = 1;\nconst HEADERS_RECEIVED = 2;\nconst LOADING = 3;\nconst DONE = 4;\n\nconst SUPPORTED_RESPONSE_TYPES = {\n  arraybuffer: typeof global.ArrayBuffer === 'function',\n  blob: typeof global.Blob === 'function',\n  document: false,\n  json: true,\n  text: true,\n  '': true,\n};\n\nconst REQUEST_EVENTS = [\n  'abort',\n  'error',\n  'load',\n  'loadstart',\n  'progress',\n  'timeout',\n  'loadend',\n];\n\nconst XHR_EVENTS = REQUEST_EVENTS.concat('readystatechange');\n\nclass XMLHttpRequestEventTarget extends EventTarget(...REQUEST_EVENTS) {\n  onload: ?Function;\n  onloadstart: ?Function;\n  onprogress: ?Function;\n  ontimeout: ?Function;\n  onerror: ?Function;\n  onabort: ?Function;\n  onloadend: ?Function;\n}\n\n/**\n * Shared base for platform-specific XMLHttpRequest implementations.\n */\nclass XMLHttpRequest extends EventTarget(...XHR_EVENTS) {\n  static UNSENT: number = UNSENT;\n  static OPENED: number = OPENED;\n  static HEADERS_RECEIVED: number = HEADERS_RECEIVED;\n  static LOADING: number = LOADING;\n  static DONE: number = DONE;\n\n  static _interceptor: ?XHRInterceptor = null;\n\n  UNSENT: number = UNSENT;\n  OPENED: number = OPENED;\n  HEADERS_RECEIVED: number = HEADERS_RECEIVED;\n  LOADING: number = LOADING;\n  DONE: number = DONE;\n\n  // EventTarget automatically initializes these to `null`.\n  onload: ?Function;\n  onloadstart: ?Function;\n  onprogress: ?Function;\n  ontimeout: ?Function;\n  onerror: ?Function;\n  onabort: ?Function;\n  onloadend: ?Function;\n  onreadystatechange: ?Function;\n\n  readyState: number = UNSENT;\n  responseHeaders: ?Object;\n  status: number = 0;\n  timeout: number = 0;\n  responseURL: ?string;\n  withCredentials: boolean = true;\n\n  upload: XMLHttpRequestEventTarget = new XMLHttpRequestEventTarget();\n\n  _requestId: ?number;\n  _subscriptions: Array<*>;\n\n  _aborted: boolean = false;\n  _cachedResponse: Response;\n  _hasError: boolean = false;\n  _headers: Object;\n  _lowerCaseResponseHeaders: Object;\n  _method: ?string = null;\n  _response: string | ?Object;\n  _responseType: ResponseType;\n  _response: string = '';\n  _sent: boolean;\n  _url: ?string = null;\n  _timedOut: boolean = false;\n  _trackingName: string = 'unknown';\n  _incrementalEvents: boolean = false;\n\n  static setInterceptor(interceptor: ?XHRInterceptor) {\n    XMLHttpRequest._interceptor = interceptor;\n  }\n\n  constructor() {\n    super();\n    this._reset();\n  }\n\n  _reset(): void {\n    this.readyState = this.UNSENT;\n    this.responseHeaders = undefined;\n    this.status = 0;\n    delete this.responseURL;\n\n    this._requestId = null;\n\n    this._cachedResponse = undefined;\n    this._hasError = false;\n    this._headers = {};\n    this._response = '';\n    this._responseType = '';\n    this._sent = false;\n    this._lowerCaseResponseHeaders = {};\n\n    this._clearSubscriptions();\n    this._timedOut = false;\n  }\n\n  get responseType(): ResponseType {\n    return this._responseType;\n  }\n\n  set responseType(responseType: ResponseType): void {\n    if (this._sent) {\n      throw new Error(\n        \"Failed to set the 'responseType' property on 'XMLHttpRequest': The \" +\n          'response type cannot be set after the request has been sent.',\n      );\n    }\n    if (!SUPPORTED_RESPONSE_TYPES.hasOwnProperty(responseType)) {\n      warning(\n        false,\n        `The provided value '${responseType}' is not a valid 'responseType'.`,\n      );\n      return;\n    }\n\n    // redboxes early, e.g. for 'arraybuffer' on ios 7\n    invariant(\n      SUPPORTED_RESPONSE_TYPES[responseType] || responseType === 'document',\n      `The provided value '${responseType}' is unsupported in this environment.`,\n    );\n\n    if (responseType === 'blob') {\n      invariant(\n        BlobManager.isAvailable,\n        'Native module BlobModule is required for blob support',\n      );\n    }\n    this._responseType = responseType;\n  }\n\n  get responseText(): string {\n    if (this._responseType !== '' && this._responseType !== 'text') {\n      throw new Error(\n        \"The 'responseText' property is only available if 'responseType' \" +\n          `is set to '' or 'text', but it is '${this._responseType}'.`,\n      );\n    }\n    if (this.readyState < LOADING) {\n      return '';\n    }\n    return this._response;\n  }\n\n  get response(): Response {\n    const {responseType} = this;\n    if (responseType === '' || responseType === 'text') {\n      return this.readyState < LOADING || this._hasError ? '' : this._response;\n    }\n\n    if (this.readyState !== DONE) {\n      return null;\n    }\n\n    if (this._cachedResponse !== undefined) {\n      return this._cachedResponse;\n    }\n\n    switch (responseType) {\n      case 'document':\n        this._cachedResponse = null;\n        break;\n\n      case 'arraybuffer':\n        this._cachedResponse = base64.toByteArray(this._response).buffer;\n        break;\n\n      case 'blob':\n        if (typeof this._response === 'object' && this._response) {\n          this._cachedResponse = BlobManager.createFromOptions(this._response);\n        } else if (this._response === '') {\n          this._cachedResponse = null;\n        } else { \n          throw new Error(`Invalid response for blob: ${this._response}`);\n        }\n        break;\n\n      case 'json':\n        try {\n          this._cachedResponse = JSON.parse(this._response);\n        } catch (_) {\n          this._cachedResponse = null;\n        }\n        break;\n\n      default:\n        this._cachedResponse = null;\n    }\n\n    return this._cachedResponse;\n  }\n\n  // exposed for testing\n  __didCreateRequest(requestId: number): void {\n    this._requestId = requestId;\n\n    XMLHttpRequest._interceptor &&\n      XMLHttpRequest._interceptor.requestSent(\n        requestId,\n        this._url || '',\n        this._method || 'GET',\n        this._headers,\n      );\n  }\n\n  // exposed for testing\n  __didUploadProgress(\n    requestId: number,\n    progress: number,\n    total: number,\n  ): void {\n    if (requestId === this._requestId) {\n      this.upload.dispatchEvent({\n        type: 'progress',\n        lengthComputable: true,\n        loaded: progress,\n        total,\n      });\n    }\n  }\n\n  __didReceiveResponse(\n    requestId: number,\n    status: number,\n    responseHeaders: ?Object,\n    responseURL: ?string,\n  ): void {\n    if (requestId === this._requestId) {\n      this.status = status;\n      this.setResponseHeaders(responseHeaders);\n      this.setReadyState(this.HEADERS_RECEIVED);\n      if (responseURL || responseURL === '') {\n        this.responseURL = responseURL;\n      } else {\n        delete this.responseURL;\n      }\n\n      XMLHttpRequest._interceptor &&\n        XMLHttpRequest._interceptor.responseReceived(\n          requestId,\n          responseURL || this._url || '',\n          status,\n          responseHeaders || {},\n        );\n    }\n  }\n\n  __didReceiveData(requestId: number, response: string): void {\n    if (requestId !== this._requestId) {\n      return;\n    }\n    this._response = response;\n    this._cachedResponse = undefined; // force lazy recomputation\n    this.setReadyState(this.LOADING);\n\n    XMLHttpRequest._interceptor &&\n      XMLHttpRequest._interceptor.dataReceived(requestId, response);\n  }\n\n  __didReceiveIncrementalData(\n    requestId: number,\n    responseText: string,\n    progress: number,\n    total: number,\n  ) {\n    if (requestId !== this._requestId) {\n      return;\n    }\n    if (!this._response) {\n      this._response = responseText;\n    } else {\n      this._response += responseText;\n    }\n\n    XMLHttpRequest._interceptor &&\n      XMLHttpRequest._interceptor.dataReceived(requestId, responseText);\n\n    this.setReadyState(this.LOADING);\n    this.__didReceiveDataProgress(requestId, progress, total);\n  }\n\n  __didReceiveDataProgress(\n    requestId: number,\n    loaded: number,\n    total: number,\n  ): void {\n    if (requestId !== this._requestId) {\n      return;\n    }\n    this.dispatchEvent({\n      type: 'progress',\n      lengthComputable: total >= 0,\n      loaded,\n      total,\n    });\n  }\n\n  // exposed for testing\n  __didCompleteResponse(\n    requestId: number,\n    error: string,\n    timeOutError: boolean,\n  ): void {\n    if (requestId === this._requestId) {\n      if (error) {\n        if (this._responseType === '' || this._responseType === 'text') {\n          this._response = error;\n        }\n        this._hasError = true;\n        if (timeOutError) {\n          this._timedOut = true;\n        }\n      }\n      this._clearSubscriptions();\n      this._requestId = null;\n      this.setReadyState(this.DONE);\n\n      if (error) {\n        XMLHttpRequest._interceptor &&\n          XMLHttpRequest._interceptor.loadingFailed(requestId, error);\n      } else {\n        XMLHttpRequest._interceptor &&\n          XMLHttpRequest._interceptor.loadingFinished(\n            requestId,\n            this._response.length,\n          );\n      }\n    }\n  }\n\n  _clearSubscriptions(): void {\n    (this._subscriptions || []).forEach(sub => {\n      if (sub) {\n        sub.remove();\n      }\n    });\n    this._subscriptions = [];\n  }\n\n  getAllResponseHeaders(): ?string {\n    if (!this.responseHeaders) {\n      // according to the spec, return null if no response has been received\n      return null;\n    }\n    const headers = this.responseHeaders || {};\n    return Object.keys(headers)\n      .map(headerName => {\n        return headerName + ': ' + headers[headerName];\n      })\n      .join('\\r\\n');\n  }\n\n  getResponseHeader(header: string): ?string {\n    const value = this._lowerCaseResponseHeaders[header.toLowerCase()];\n    return value !== undefined ? value : null;\n  }\n\n  setRequestHeader(header: string, value: any): void {\n    if (this.readyState !== this.OPENED) {\n      throw new Error('Request has not been opened');\n    }\n    this._headers[header.toLowerCase()] = String(value);\n  }\n\n  /**\n   * Custom extension for tracking origins of request.\n   */\n  setTrackingName(trackingName: string): XMLHttpRequest {\n    this._trackingName = trackingName;\n    return this;\n  }\n\n  open(method: string, url: string, async: ?boolean): void {\n    /* Other optional arguments are not supported yet */\n    if (this.readyState !== this.UNSENT) {\n      throw new Error('Cannot open, already sending');\n    }\n    if (async !== undefined && !async) {\n      // async is default\n      throw new Error('Synchronous http requests are not supported');\n    }\n    if (!url) {\n      throw new Error('Cannot load an empty url');\n    }\n    this._method = method.toUpperCase();\n    this._url = url;\n    this._aborted = false;\n    this.setReadyState(this.OPENED);\n  }\n\n  send(data: any): void {\n    if (this.readyState !== this.OPENED) {\n      throw new Error('Request has not been opened');\n    }\n    if (this._sent) {\n      throw new Error('Request has already been sent');\n    }\n    this._sent = true;\n    const incrementalEvents =\n      this._incrementalEvents || !!this.onreadystatechange || !!this.onprogress;\n\n    this._subscriptions.push(\n      RCTNetworking.addListener('didSendNetworkData', args =>\n        this.__didUploadProgress(...args),\n      ),\n    );\n    this._subscriptions.push(\n      RCTNetworking.addListener('didReceiveNetworkResponse', args =>\n        this.__didReceiveResponse(...args),\n      ),\n    );\n    this._subscriptions.push(\n      RCTNetworking.addListener('didReceiveNetworkData', args =>\n        this.__didReceiveData(...args),\n      ),\n    );\n    this._subscriptions.push(\n      RCTNetworking.addListener('didReceiveNetworkIncrementalData', args =>\n        this.__didReceiveIncrementalData(...args),\n      ),\n    );\n    this._subscriptions.push(\n      RCTNetworking.addListener('didReceiveNetworkDataProgress', args =>\n        this.__didReceiveDataProgress(...args),\n      ),\n    );\n    this._subscriptions.push(\n      RCTNetworking.addListener('didCompleteNetworkResponse', args =>\n        this.__didCompleteResponse(...args),\n      ),\n    );\n\n    let nativeResponseType: NativeResponseType = 'text';\n    if (this._responseType === 'arraybuffer') {\n      nativeResponseType = 'base64';\n    }\n    if (this._responseType === 'blob') {\n      nativeResponseType = 'blob';\n    }\n\n    invariant(this._method, 'Request method needs to be defined.');\n    invariant(this._url, 'Request URL needs to be defined.');\n    RCTNetworking.sendRequest(\n      this._method,\n      this._trackingName,\n      this._url,\n      this._headers,\n      data,\n      /* $FlowFixMe(>=0.78.0 site=react_native_android_fb) This issue was found\n       * when making Flow check .android.js files. */\n      nativeResponseType,\n      incrementalEvents,\n      this.timeout,\n      this.__didCreateRequest.bind(this),\n      this.withCredentials,\n    );\n  }\n\n  abort(): void {\n    this._aborted = true;\n    if (this._requestId) {\n      RCTNetworking.abortRequest(this._requestId);\n    }\n    // only call onreadystatechange if there is something to abort,\n    // below logic is per spec\n    if (\n      !(\n        this.readyState === this.UNSENT ||\n        (this.readyState === this.OPENED && !this._sent) ||\n        this.readyState === this.DONE\n      )\n    ) {\n      this._reset();\n      this.setReadyState(this.DONE);\n    }\n    // Reset again after, in case modified in handler\n    this._reset();\n  }\n\n  setResponseHeaders(responseHeaders: ?Object): void {\n    this.responseHeaders = responseHeaders || null;\n    const headers = responseHeaders || {};\n    this._lowerCaseResponseHeaders = Object.keys(headers).reduce(\n      (lcaseHeaders, headerName) => {\n        lcaseHeaders[headerName.toLowerCase()] = headers[headerName];\n        return lcaseHeaders;\n      },\n      {},\n    );\n  }\n\n  setReadyState(newState: number): void {\n    this.readyState = newState;\n    this.dispatchEvent({type: 'readystatechange'});\n    if (newState === this.DONE) {\n      if (this._aborted) {\n        this.dispatchEvent({type: 'abort'});\n      } else if (this._hasError) {\n        if (this._timedOut) {\n          this.dispatchEvent({type: 'timeout'});\n        } else {\n          this.dispatchEvent({type: 'error'});\n        }\n      } else {\n        this.dispatchEvent({type: 'load'});\n      }\n      this.dispatchEvent({type: 'loadend'});\n    }\n  }\n\n  /* global EventListener */\n  addEventListener(type: string, listener: EventListener): void {\n    // If we dont' have a 'readystatechange' event handler, we don't\n    // have to send repeated LOADING events with incremental updates\n    // to responseText, which will avoid a bunch of native -> JS\n    // bridge traffic.\n    if (type === 'readystatechange' || type === 'progress') {\n      this._incrementalEvents = true;\n    }\n    super.addEventListener(type, listener);\n  }\n}\n\nmodule.exports = XMLHttpRequest;\n"]}]}