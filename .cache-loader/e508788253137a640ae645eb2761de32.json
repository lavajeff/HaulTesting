{"remainingRequest":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js??ref--5-1!/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js??ref--5-2!/Users/jeffrey/HaulTesting/node_modules/metro/src/lib/bundle-modules/MetroClient.js","dependencies":[{"path":"/Users/jeffrey/HaulTesting/node_modules/metro/src/lib/bundle-modules/MetroClient.js","mtime":1539700107299},{"path":"/Users/jeffrey/HaulTesting/node_modules/cache-loader/dist/cjs.js","mtime":1539652983212},{"path":"/Users/jeffrey/HaulTesting/node_modules/thread-loader/dist/cjs.js","mtime":1539652983315},{"path":"/Users/jeffrey/HaulTesting/node_modules/babel-loader/lib/index.js","mtime":1539615827828}],"contextDependencies":[],"result":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));(function(){var enterModule=require('react-hot-loader').enterModule;enterModule&&enterModule(module);})();var EventEmitter=require(\"eventemitter3\");var MetroClient=function(_EventEmitter){(0,_inherits2.default)(MetroClient,_EventEmitter);function MetroClient(url){var _this;(0,_classCallCheck2.default)(this,MetroClient);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(MetroClient).call(this));_this._url=url;return _this;}(0,_createClass2.default)(MetroClient,[{key:\"enable\",value:function enable(){var _this2=this;if(this._ws){this.disable();}this._ws=new global.WebSocket(this._url);this._ws.onerror=function(error){_this2.emit(\"connection-error\",error);};this._ws.onclose=function(){_this2.emit(\"close\");};this._ws.onmessage=function(message){var data=JSON.parse(message.data);switch(data.type){case\"update-start\":_this2.emit(\"update-start\");break;case\"update\":var _data$body=data.body;var modules=_data$body.modules,sourceMappingURLs=_data$body.sourceMappingURLs,sourceURLs=_data$body.sourceURLs;_this2.emit(\"update\");modules.forEach(function(_ref,i){var id=_ref.id,code=_ref.code;code+=\"\\n\\n\"+sourceMappingURLs[i];var injectFunction=typeof global.nativeInjectHMRUpdate===\"function\"?global.nativeInjectHMRUpdate:eval;injectFunction(code,sourceURLs[i]);});break;case\"update-done\":_this2.emit(\"update-done\");break;case\"error\":_this2.emit(\"error\",data.body);break;default:_this2.emit(\"error\",{type:\"unknown-message\",message:data});}};}},{key:\"disable\",value:function disable(){if(this._ws){this._ws.close();this._ws=undefined;}}},{key:\"__reactstandin__regenerateByEval\",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code);}}]);return MetroClient;}(EventEmitter);module.exports=MetroClient;;(function(){var reactHotLoader=require('react-hot-loader').default;var leaveModule=require('react-hot-loader').leaveModule;if(!reactHotLoader){return;}reactHotLoader.register(MetroClient,\"MetroClient\",\"/Users/jeffrey/HaulTesting/node_modules/metro/src/lib/bundle-modules/MetroClient.js\");leaveModule(module);})();;",{"version":3,"sources":["/Users/jeffrey/HaulTesting/node_modules/metro/src/lib/bundle-modules/MetroClient.js"],"names":["EventEmitter","require","MetroClient","url","_url","_ws","disable","global","WebSocket","onerror","error","emit","onclose","onmessage","message","data","JSON","parse","type","_data$body","body","modules","sourceMappingURLs","sourceURLs","forEach","_ref","i","id","code","injectFunction","nativeInjectHMRUpdate","eval","close","undefined","module","exports"],"mappings":"AASA,a,upBAEA,GAAMA,CAAAA,YAAY,CAAGC,OAAO,CAAC,eAAD,CAA5B,C,GAMMC,CAAAA,W,2EACJ,qBAAYC,GAAZ,CAAiB,0DACf,yGACA,MAAKC,IAAL,CAAYD,GAAZ,CAFe,aAGhB,C,4EAEQ,iBACP,GAAI,KAAKE,GAAT,CAAc,CACZ,KAAKC,OAAL,GACD,CAID,KAAKD,GAAL,CAAW,GAAIE,CAAAA,MAAM,CAACC,SAAX,CAAqB,KAAKJ,IAA1B,CAAX,CACA,KAAKC,GAAL,CAASI,OAAT,CAAmB,SAAAC,KAAK,CAAI,CAC1B,MAAI,CAACC,IAAL,CAAU,kBAAV,CAA8BD,KAA9B,EACD,CAFD,CAGA,KAAKL,GAAL,CAASO,OAAT,CAAmB,UAAM,CACvB,MAAI,CAACD,IAAL,CAAU,OAAV,EACD,CAFD,CAGA,KAAKN,GAAL,CAASQ,SAAT,CAAqB,SAAAC,OAAO,CAAI,CAC9B,GAAMC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWH,OAAO,CAACC,IAAnB,CAAb,CACA,OAAQA,IAAI,CAACG,IAAb,EACE,IAAK,cAAL,CACE,MAAI,CAACP,IAAL,CAAU,cAAV,EACA,MAEF,IAAK,QAAL,CACE,GAAIQ,CAAAA,UAAU,CAAGJ,IAAI,CAACK,IAAtB,CACA,GAAMC,CAAAA,OAAO,CAAGF,UAAU,CAACE,OAA3B,CACEC,iBAAiB,CAAGH,UAAU,CAACG,iBADjC,CAEEC,UAAU,CAAGJ,UAAU,CAACI,UAF1B,CAIA,MAAI,CAACZ,IAAL,CAAU,QAAV,EACAU,OAAO,CAACG,OAAR,CAAgB,SAACC,IAAD,CAAOC,CAAP,CAAa,CAC3B,GAAIC,CAAAA,EAAE,CAAGF,IAAI,CAACE,EAAd,CACEC,IAAI,CAAGH,IAAI,CAACG,IADd,CAEAA,IAAI,EAAI,OAASN,iBAAiB,CAACI,CAAD,CAAlC,CAKA,GAAMG,CAAAA,cAAc,CAClB,MAAOtB,CAAAA,MAAM,CAACuB,qBAAd,GAAwC,UAAxC,CACIvB,MAAM,CAACuB,qBADX,CAEIC,IAHN,CAKAF,cAAc,CAACD,IAAD,CAAOL,UAAU,CAACG,CAAD,CAAjB,CAAd,CACD,CAdD,EAeA,MAEF,IAAK,aAAL,CACE,MAAI,CAACf,IAAL,CAAU,aAAV,EACA,MAEF,IAAK,OAAL,CACE,MAAI,CAACA,IAAL,CAAU,OAAV,CAAmBI,IAAI,CAACK,IAAxB,EACA,MAEF,QACE,MAAI,CAACT,IAAL,CAAU,OAAV,CAAmB,CAAEO,IAAI,CAAE,iBAAR,CAA2BJ,OAAO,CAAEC,IAApC,CAAnB,EAtCJ,CAwCD,CA1CD,CA2CD,C,yCAES,CACR,GAAI,KAAKV,GAAT,CAAc,CACZ,KAAKA,GAAL,CAAS2B,KAAT,GACA,KAAK3B,GAAL,CAAW4B,SAAX,CACD,CACF,C,mJAtEuBjC,Y,EAyE1BkC,MAAM,CAACC,OAAP,CAAiBjC,WAAjB,C,gLAzEMA,W","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n *\n * @format\n */\n\"use strict\";\n\nconst EventEmitter = require(\"eventemitter3\");\n\n/**\n * The Hot Module Reloading Client connects to Metro via WebSocket, to receive\n * updates from it and propagate them to the runtime to reflect the changes.\n */\nclass MetroClient extends EventEmitter {\n  constructor(url) {\n    super();\n    this._url = url;\n  }\n\n  enable() {\n    if (this._ws) {\n      this.disable();\n    }\n\n    // Access the global WebSocket object only after enabling the client,\n    // since some polyfills do the initialization lazily.\n    this._ws = new global.WebSocket(this._url);\n    this._ws.onerror = error => {\n      this.emit(\"connection-error\", error);\n    };\n    this._ws.onclose = () => {\n      this.emit(\"close\");\n    };\n    this._ws.onmessage = message => {\n      const data = JSON.parse(message.data);\n      switch (data.type) {\n        case \"update-start\":\n          this.emit(\"update-start\");\n          break;\n\n        case \"update\":\n          var _data$body = data.body;\n          const modules = _data$body.modules,\n            sourceMappingURLs = _data$body.sourceMappingURLs,\n            sourceURLs = _data$body.sourceURLs;\n\n          this.emit(\"update\");\n          modules.forEach((_ref, i) => {\n            let id = _ref.id,\n              code = _ref.code;\n            code += \"\\n\\n\" + sourceMappingURLs[i];\n\n            // In JSC we need to inject from native for sourcemaps to work\n            // (Safari doesn't support `sourceMappingURL` nor any variant when\n            // evaluating code) but on Chrome we can simply use eval.\n            const injectFunction =\n              typeof global.nativeInjectHMRUpdate === \"function\"\n                ? global.nativeInjectHMRUpdate\n                : eval; // eslint-disable-line no-eval\n\n            injectFunction(code, sourceURLs[i]);\n          });\n          break;\n\n        case \"update-done\":\n          this.emit(\"update-done\");\n          break;\n\n        case \"error\":\n          this.emit(\"error\", data.body);\n          break;\n\n        default:\n          this.emit(\"error\", { type: \"unknown-message\", message: data });\n      }\n    };\n  }\n\n  disable() {\n    if (this._ws) {\n      this._ws.close();\n      this._ws = undefined;\n    }\n  }\n}\n\nmodule.exports = MetroClient;\n"]}]}